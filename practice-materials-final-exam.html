<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accounting Cycle Mastery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- Phosphor Icons for the menu -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f4f6f8; }
        
        /* Sidebar Transitions */
        .sidebar-transition { transition: width 0.3s ease-in-out; }
        
        /* Scroll locking */
        .no-scroll { overflow: hidden; height: 100vh; }

        /* Print Specifics */
        .print-layout { font-family: 'Inter', sans-serif; font-size: 10pt; padding: 0.5in; }
        .feedback-correct { background-color: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 0.5rem; padding: 0.75rem; }
        .feedback-incorrect { background-color: #fef2f2; border: 1px solid #fecaca; border-radius: 0.5rem; padding: 0.75rem; }
        
        /* Sidebar Text Hiding */
        .sidebar-collapsed .menu-text { display: none; }
        .sidebar-collapsed .menu-item { justify-content: center; padding-left: 0; padding-right: 0; }

        /* Question Palette Styles */
        .q-dot {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid #e5e7eb;
            transition: all 0.2s;
        }
        .q-dot:hover { background-color: #f3f4f6; }
        
        /* Current Question (Blue) */
        .q-dot.active {
            background-color: #3b82f6; 
            color: white;
            border-color: #3b82f6;
        }
        
        /* Answered Question (Green) */
        .q-dot.answered {
            background-color: #dcfce7; 
            border-color: #22c55e; 
            color: #166534;
        }
        
        /* Current AND Answered (Dark Green) */
        .q-dot.active.answered {
            background-color: #15803d; 
            color: white;
            border-color: #15803d;
        }
    </style>
</head>
<body class="h-screen flex overflow-hidden bg-gray-50">

    <!-- STUDENT INFO OVERLAY (Modals) -->
    <div id="student-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-95 z-50 flex items-center justify-center p-4">
        <section id="student-info-section" class="bg-yellow-50 p-6 rounded-xl shadow-2xl max-w-md w-full border-l-4 border-yellow-500">
            <h2 class="text-2xl font-bold text-yellow-800 mb-3">Student Data Input üìù</h2>
            <p class="text-sm text-yellow-700 mb-4">Please identify yourself to unlock the modules.</p>
            <div class="space-y-3">
                <input type="number" id="class-number" placeholder="Class Number" class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-yellow-500 focus:outline-none">
                <input type="text" id="full-name" placeholder="Surname, First Name, M.I." class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-yellow-500 focus:outline-none">
                <input type="text" id="grade-section" placeholder="Grade & Section (e.g. 11-ABM)" class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-yellow-500 focus:outline-none">
            </div>
            <button onclick="checkStudentInfo()" class="mt-6 w-full px-4 py-3 bg-yellow-600 text-white font-bold rounded-lg shadow-md hover:bg-yellow-700 transition transform hover:scale-105">
                Confirm & Start Learning
            </button>
        </section>
    </div>

    <!-- SIDEBAR -->
    <aside id="sidebar" class="bg-blue-900 text-white flex flex-col h-full shadow-xl z-20 sidebar-transition w-64">
        <div class="p-4 flex items-center justify-between border-b border-blue-800 h-16">
            <span class="font-bold text-lg tracking-wider menu-text truncate">ACCOUNTING CYCLE</span>
            <button onclick="toggleSidebar()" class="text-blue-200 hover:text-white focus:outline-none">
                <i class="ph ph-list text-2xl"></i>
            </button>
        </div>
        <nav class="flex-1 overflow-y-auto py-4 space-y-1" id="nav-container"></nav>
        <div class="p-4 border-t border-blue-800">
             <button onclick="printToPDF()" class="w-full flex items-center p-2 rounded-lg bg-green-600 hover:bg-green-700 transition-colors group menu-item">
                <i class="ph ph-printer text-xl shrink-0"></i>
                <span class="menu-text ml-3 font-medium whitespace-nowrap">Print Progress PDF</span>
            </button>
        </div>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <main class="flex-1 flex flex-col h-full overflow-hidden relative">
        <div id="warning-message" class="bg-red-100 text-red-700 text-xs font-semibold p-2 text-center border-b border-red-200">
             ‚ö†Ô∏è **WARNING:** PRINT your PDF before refreshing or closing. Progress is not saved on server.
        </div>

        <header class="bg-white border-b border-gray-200 p-6 flex flex-col md:flex-row justify-between items-start md:items-center shadow-sm z-10">
            <div>
                <h1 id="page-title" class="text-2xl font-extrabold text-gray-800">Welcome</h1>
                <p id="page-subtitle" class="text-sm text-gray-500 mt-1">Select a module from the sidebar to begin.</p>
            </div>
            <div class="mt-4 md:mt-0 flex space-x-2 bg-gray-100 p-1 rounded-lg">
                <button onclick="switchTab('theory')" id="tab-theory" class="px-4 py-2 text-sm font-semibold rounded-md shadow-sm bg-white text-blue-700 transition-all">Topics & Concepts</button>
                <button onclick="switchTab('practice')" id="tab-practice" class="px-4 py-2 text-sm font-semibold rounded-md text-gray-500 hover:text-gray-700 transition-all">Practice Questions</button>
            </div>
        </header>

        <div id="main-scroll-area" class="flex-1 overflow-y-auto p-6 scroll-smooth">
            
            <!-- THEORY VIEW -->
            <div id="view-theory" class="max-w-4xl mx-auto animate-fade-in">
                <div id="dynamic-theory-content" class="prose max-w-none text-gray-700"></div>
            </div>

            <!-- PRACTICE VIEW (Updated Layout) -->
            <div id="view-practice" class="hidden max-w-6xl mx-auto animate-fade-in h-full">
                <div class="flex flex-col lg:flex-row gap-6 h-full">

                    <!-- Left: Question Card -->
                    <div class="flex-1">
                        <div id="question-card" class="bg-white p-6 rounded-xl shadow-lg min-h-[400px] relative flex flex-col justify-between">
                            <!-- Content -->
                            <div id="question-content-area">
                                <p class="text-gray-500">Select a module to load questions.</p>
                            </div>

                            <!-- Navigation -->
                            <div class="mt-8 flex justify-between items-center pt-4 border-t border-gray-100">
                                <button onclick="prevQuestion()" id="btn-prev" class="px-4 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50 font-medium flex items-center disabled:opacity-50 disabled:cursor-not-allowed">
                                    ‚Üê Previous
                                </button>
                                <span id="question-counter" class="text-sm text-gray-500 font-mono">0 / 0</span>
                                <button onclick="nextQuestion()" id="btn-next" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center disabled:opacity-50 disabled:cursor-not-allowed">
                                    Next ‚Üí
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Palette -->
                    <div class="w-full lg:w-72 flex-shrink-0">
                        <div class="bg-white p-4 rounded-xl shadow-lg lg:sticky lg:top-0">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="text-sm font-bold text-gray-700 uppercase tracking-wider">Navigator</h3>
                                <span id="progress-text" class="text-xs font-bold text-blue-600">0/50 Answered</span>
                            </div>
                            
                            <div id="question-palette" class="grid grid-cols-5 gap-2 max-h-[60vh] overflow-y-auto pr-1 custom-scrollbar">
                                <!-- Dots injected via JS -->
                            </div>

                            <div class="mt-4 pt-3 border-t border-gray-100 text-xs text-gray-500 flex flex-col gap-2">
                                <div class="flex items-center"><span class="w-3 h-3 rounded-full border border-gray-300 mr-2"></span> Unanswered</div>
                                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-blue-500 mr-2"></span> Current</div>
                                <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-green-100 border border-green-500 mr-2"></span> Answered</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </main>

    <!-- PRINT MODALS -->
    <div id="print-range-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-75 z-50 flex justify-center items-center">
        <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md">
            <h2 class="text-xl font-bold text-blue-800 mb-4">Print Report</h2>
            <div class="mb-4 p-3 bg-blue-50 rounded border border-blue-100">
                <label class="flex items-center space-x-2 cursor-pointer">
                    <input type="checkbox" id="print-current-only" class="form-checkbox text-blue-600" checked onchange="togglePrintInputs()">
                    <span class="text-sm font-bold text-blue-800">Print ONLY current module questions</span>
                </label>
            </div>
            <div id="custom-range-inputs" class="space-y-3 opacity-50 pointer-events-none transition-opacity">
                <p class="text-xs text-gray-500">Custom range printing (Global IDs)</p>
                <div class="flex space-x-2">
                    <input type="number" id="range-start" placeholder="Start ID" class="w-full p-2 border rounded text-sm">
                    <input type="number" id="range-end" placeholder="End ID" class="w-full p-2 border rounded text-sm">
                </div>
            </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button onclick="cancelPrintProcess()" class="px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500">Cancel</button>
                <button onclick="startPrintProcess()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Start Preview</button>
            </div>
        </div>
    </div>

    <div id="print-preview-modal" class="hidden fixed inset-0 bg-gray-50 z-50 overflow-y-auto">
        <div class="min-h-screen flex flex-col">
            <header class="sticky top-0 bg-white border-b border-gray-300 p-4 shadow-md flex justify-between items-center z-10">
                <h2 class="text-lg font-bold text-blue-800">PDF Preview</h2>
                <div class="flex items-center space-x-2">
                    <button onclick="cancelPrintPreview()" class="px-3 py-1 bg-gray-500 text-white rounded text-sm">Close</button>
                    <button id="download-pdf-button" onclick="runActualPDFGeneration()" class="px-3 py-1 bg-green-300 text-gray-600 rounded text-sm cursor-not-allowed" disabled>Scroll to End</button>
                </div>
            </header>
            <div id="print-preview-content" class="p-8 bg-white shadow-lg max-w-5xl mx-auto my-4 flex-1"></div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        // Adjusted ranges for 50 questions per topic
        const modules = [
            { id: 'step1', title: '1. Deferrals and Accruals', icon: 'ph-scales', range: [1, 50], theoryId: 'theory-adjustments' },
            { id: 'step5', title: '2. The 10-Column Worksheet', icon: 'ph-table', range: [51, 100], theoryId: 'theory-worksheet' },
            { id: 'step6', title: '3. Financial Statements', icon: 'ph-file-text', range: [101, 150], theoryId: 'theory-fs' },
            { id: 'step7', title: '4. Adjusting Entries (Journalizing)', icon: 'ph-notebook', range: [151, 200], theoryId: 'theory-step7' },
            { id: 'step8', title: '5. Closing Entries', icon: 'ph-x-circle', range: [201, 250], theoryId: 'theory-step8' },
            { id: 'step9', title: '6. Post-Closing Trial Balance', icon: 'ph-list-checks', range: [251, 300], theoryId: 'theory-step9' },
            { id: 'step10', title: '7. Reversing Entries', icon: 'ph-arrow-u-up-left', range: [301, 350], theoryId: 'theory-step10' }
        ];

        let currentModuleIndex = 0;
        let isSidebarCollapsed = false;
        let currentModuleQuestions = []; // Subset for current module
        let currentQuestionIndex = 0;    // Index within the subset
        let userAnswers = {};            // Global storage: { qID: "Answer String" }

        // --- QUESTION DATA GENERATION ---
        const questions = [];

        // Helper to create question object
        const createQ = (id, type, topic, qText, opts, ans, expl) => ({
            id, type, topic, q: qText, options: opts, a: ans, s: expl
        });

// ==========================================
        // 1. DEFERRALS AND ACCRUALS (Questions 1-50)
        // ==========================================
        questions.push(
            // --- Basic Concepts (1-10) ---
            createQ(1, 'Theory', 'Deferrals', 'Which of the following best describes a deferral?', ['Cash is received/paid before revenue/expense is recognized', 'Revenue/expense is recognized before cash is received/paid', 'Cash is received/paid at the same time', 'None of the above'], 'Cash is received/paid before revenue/expense is recognized', 'Deferrals postpone recognition until later.'),
            createQ(2, 'Problem', 'Accruals', 'Accrued interest on a ‚Ç±5,000,000 loan at 12% for 3 months is:', ['‚Ç±150,000', '‚Ç±500,000', '‚Ç±600,000', '‚Ç±15,000'], '‚Ç±150,000', 'Calculation: 5,000,000 * 12% * 3/12 = 150,000.'),
            createQ(3, 'Theory', 'Principles', 'The matching principle states that:', ['Expenses should be recorded when cash is paid', 'Revenues should be recorded when cash is received', 'Expenses should be matched with revenues in the period they help generate them', 'Assets must equal liabilities'], 'Expenses should be matched with revenues in the period they help generate them', 'This is the core of accrual accounting.'),
            createQ(4, 'Theory', 'Accruals', 'An accrual refers to an event where:', ['Cash has not yet been exchanged, but revenue/expense is recognized', 'Cash is exchanged before revenue/expense is recognized', 'No transaction has occurred', 'Inventory is purchased'], 'Cash has not yet been exchanged, but revenue/expense is recognized', 'Accruals record items "accruing" or building up over time before payment.'),
            createQ(5, 'Problem', 'Deferrals', 'Paid ‚Ç±1,200,000 for 1 year insurance on July 1. How much is expense by Dec 31?', ['‚Ç±1,200,000', '‚Ç±600,000', '‚Ç±100,000', '‚Ç±0'], '‚Ç±600,000', 'July to Dec is 6 months. 1,200,000 * 6/12 = 600,000.'),
            createQ(6, 'Theory', 'Time Period', 'The Time Period Assumption implies that:', ['The business will last forever', 'Economic life can be divided into artificial time periods', 'Fiscal year must match calendar year', 'Expenses are recorded only annually'], 'Economic life can be divided into artificial time periods', 'This allows for periodic reporting (monthly, quarterly, annually).'),
            createQ(7, 'Problem', 'Accruals', 'Weekly payroll is ‚Ç±2,500,000 (5 days). Year ends on Wednesday. Accrued salary is:', ['‚Ç±500,000', '‚Ç±1,000,000', '‚Ç±1,500,000', '‚Ç±2,500,000'], '‚Ç±1,500,000', '3 days (Mon-Wed) worked. 2,500,000 / 5 * 3 = 1,500,000.'),
            createQ(8, 'Theory', 'Revenue Rec.', 'Revenue Recognition Principle requires revenue to be recorded when:', ['Cash is received', 'The performance obligation is satisfied', 'The contract is signed', 'The quote is sent'], 'The performance obligation is satisfied', 'Usually when goods are transferred or services performed.'),
            createQ(9, 'Problem', 'Deferrals', 'Received ‚Ç±600,000 on Oct 1 for 6 months rent. Revenue for year ended Dec 31 is:', ['‚Ç±600,000', '‚Ç±100,000', '‚Ç±300,000', '‚Ç±200,000'], '‚Ç±300,000', 'Oct, Nov, Dec = 3 months. 600,000 * 3/6 = 300,000.'),
            createQ(10, 'Theory', 'Adjusting', 'Adjusting entries never involve:', ['Revenue', 'Expense', 'Cash', 'Asset/Liability'], 'Cash', 'Adjusting entries are for accruals/deferrals, not cash transactions.'),

            // --- Applied Journalizing & Calculations (11-25) ---
            createQ(11, 'Problem', 'Accruals', 'Interest of ‚Ç±85,000 has accrued on a Note Payable. The entry involves:', ['Credit Cash', 'Debit Interest Expense', 'Debit Interest Payable', 'Credit Interest Revenue'], 'Debit Interest Expense', 'Entry is Dr Interest Expense 85,000, Cr Interest Payable 85,000.'),
            createQ(12, 'Theory', 'Deferrals', 'Prepaid Rent is classified as a(n):', ['Liability', 'Expense', 'Asset', 'Revenue'], 'Asset', 'It provides a future economic benefit.'),
            createQ(13, 'Problem', 'Deferrals', 'Supplies Beg: ‚Ç±250,000. Purchases: ‚Ç±350,000. End Count: ‚Ç±150,000. Supplies Expense is:', ['‚Ç±450,000', '‚Ç±600,000', '‚Ç±150,000', '‚Ç±200,000'], '‚Ç±450,000', '(250k + 350k) - 150k = 450k used.'),
            createQ(14, 'Theory', 'Accruals', 'Unrecorded revenue for services performed but not billed is:', ['Unearned Revenue', 'Accrued Revenue', 'Prepaid Revenue', 'Deferred Revenue'], 'Accrued Revenue', 'You have earned it, but haven\'t billed/collected it.'),
            createQ(15, 'Problem', 'Accruals', '10% Note Receivable of ‚Ç±2,400,000 dated Dec 1. Adjusting entry on Dec 31 includes credit to:', ['Interest Receivable ‚Ç±20,000', 'Interest Revenue ‚Ç±20,000', 'Cash ‚Ç±240,000', 'Notes Receivable ‚Ç±240,000'], 'Interest Revenue ‚Ç±20,000', '2,400,000 * 10% * 1/12 = 20,000. Credit Revenue.'),
            createQ(16, 'Theory', 'Deferrals', 'Unearned Revenue is classified as a(n):', ['Asset', 'Liability', 'Revenue', 'Equity'], 'Liability', 'You owe a service or product to the customer.'),
            createQ(17, 'Problem', 'Deferrals', 'A company pays ‚Ç±3,600,000 for 3-year insurance. Monthly expense is:', ['‚Ç±300,000', '‚Ç±100,000', '‚Ç±1,200,000', '‚Ç±3,600,000'], '‚Ç±100,000', '3,600,000 / 36 months = 100,000.'),
            createQ(18, 'Theory', 'Accounts', 'Which account is a Contra-Asset?', ['Depreciation Expense', 'Accumulated Depreciation', 'Supplies', 'Accounts Payable'], 'Accumulated Depreciation', 'It reduces the book value of the related asset.'),
            createQ(19, 'Problem', 'Accruals', 'Utility bill for Dec (‚Ç±185,000) arrives in Jan. Adjustment on Dec 31 is:', ['Dr Util Exp 185k, Cr Cash 185k', 'Dr Util Exp 185k, Cr Util Payable 185k', 'Dr Util Payable 185k, Cr Cash 185k', 'No Entry'], 'Dr Util Exp 185k, Cr Util Payable 185k', 'Record expense in the period incurred (Dec).'),
            createQ(20, 'Theory', 'Impact', 'Failure to record accrued expenses will result in:', ['Understated Liabilities, Overstated Net Income', 'Overstated Liabilities, Understated Net Income', 'Understated Assets', 'Correct Net Income'], 'Understated Liabilities, Overstated Net Income', 'Missing expense means Income is too high; missing payable means Liab is too low.'),
            createQ(21, 'Problem', 'Deferrals', 'Unearned Rent bal is ‚Ç±2,500,000. If ‚Ç±1,500,000 is earned, the ending liability balance is:', ['‚Ç±1,000,000', '‚Ç±4,000,000', '‚Ç±1,500,000', '‚Ç±2,500,000'], '‚Ç±1,000,000', '2.5M - 1.5M earned = 1.0M remaining liability.'),
            createQ(22, 'Theory', 'Impact', 'Failure to record depreciation will:', ['Overstate Assets', 'Understate Assets', 'Understate Net Income', 'Have no effect'], 'Overstate Assets', 'Assets will remain at cost rather than Book Value, and expense is missing.'),
            createQ(23, 'Problem', 'Accruals', 'Daily sales are ‚Ç±450,000. Year ends on Tuesday. 2 days of unrecorded sales. Entry?', ['Dr Cash 900k, Cr Sales 900k', 'Dr A/R 900k, Cr Sales 900k', 'Dr Sales 900k, Cr A/R 900k', 'No entry'], 'Dr A/R 900k, Cr Sales 900k', 'Accrue revenue: 450k * 2 = 900k. Debit Receivable, Credit Revenue.'),
            createQ(24, 'Theory', 'Basis', 'Cash Basis accounting records revenue when:', ['Earned', 'Cash is received', 'Contract signed', 'Goods delivered'], 'Cash is received', 'Cash basis ignores accruals and deferrals.'),
            createQ(25, 'Problem', 'Deferrals', 'Prepaid Ads ‚Ç±1,200,000 (Asset Method). Used ‚Ç±800,000. Adjusting Entry?', ['Dr Ad Exp 800k, Cr Prepaid Ads 800k', 'Dr Prepaid Ads 400k, Cr Ad Exp 400k', 'Dr Ad Exp 400k, Cr Prepaid Ads 400k', 'Dr Ad Exp 1.2M, Cr Cash 1.2M'], 'Dr Ad Exp 800k, Cr Prepaid Ads 800k', 'Record the consumed portion as expense.'),

            // --- Methods, Depreciation & Analysis (26-40) ---
            createQ(26, 'Theory', 'Deferrals', 'Under the Expense Method for prepayments, the initial entry debits:', ['Asset', 'Expense', 'Liability', 'Revenue'], 'Expense', 'The entire amount is put to expense first, then adjusted to asset later.'),
            createQ(27, 'Problem', 'Deferrals', 'Rent collected in advance ‚Ç±3,000,000 credited to Rent Income (Income Method). At year end, ‚Ç±1,000,000 is still unearned. Adj Entry?', ['Dr Rent Income 1M, Cr Unearned Rent 1M', 'Dr Unearned Rent 1M, Cr Rent Income 1M', 'Dr Rent Income 2M, Cr Unearned Rent 2M', 'No entry'], 'Dr Rent Income 1M, Cr Unearned Rent 1M', 'Remove the unearned portion from Income and set up Liability.'),
            createQ(28, 'Theory', 'Depreciation', 'Depreciation is a process of:', ['Asset Valuation', 'Cost Allocation', 'Cash Accumulation', 'Market adjustment'], 'Cost Allocation', 'Allocating the cost of the asset over its useful life.'),
            createQ(29, 'Problem', 'Depreciation', 'Equip Cost ‚Ç±5,500,000, Salvage ‚Ç±500,000, Life 10 yrs. Annual Depreciation?', ['‚Ç±500,000', '‚Ç±450,000', '‚Ç±550,000', '‚Ç±5,000,000'], '‚Ç±500,000', '(5.5M - 0.5M) / 10 = 500,000.'),
            createQ(30, 'Theory', 'Book Value', 'Book Value of an asset is defined as:', ['Cost - Salvage Value', 'Cost - Accumulated Depreciation', 'Fair Market Value', 'Replacement Cost'], 'Cost - Accumulated Depreciation', 'The net value on the books.'),
            createQ(31, 'Problem', 'Accruals', 'Loan date: Nov 1. Amount: ‚Ç±20,000,000. Rate: 6%. Year end: Dec 31. Interest Payable?', ['‚Ç±200,000', '‚Ç±100,000', '‚Ç±1,200,000', '‚Ç±600,000'], '‚Ç±200,000', '20M * 6% * 2/12 = 200,000.'),
            createQ(32, 'Theory', 'Impact', 'If prepaid rent adjustment is omitted, what is the effect on Equity?', ['Overstated', 'Understated', 'No Effect', 'Zero'], 'Overstated', 'Expense is understated, so Net Income is overstated, so Equity is overstated.'),
            createQ(33, 'Problem', 'Deferrals', 'Office Supplies on hand Jan 1: ‚Ç±0. Purchased ‚Ç±80,000. End count ‚Ç±15,000. Entry?', ['Dr Supplies Exp 65k, Cr Supplies 65k', 'Dr Supplies Exp 15k, Cr Supplies 15k', 'Dr Supplies 65k, Cr Cash 65k', 'Dr Supplies 15k, Cr Supplies Exp 15k'], 'Dr Supplies Exp 65k, Cr Supplies 65k', 'Expensed the used amount: 80,000 - 15,000 = 65,000.'),
            createQ(34, 'Theory', 'Adjusting', 'Adjusting entries are prepared:', ['At the beginning of the period', 'Every time a transaction occurs', 'At the end of the accounting period', 'When cash changes hands'], 'At the end of the accounting period', 'To update accounts before financial statements.'),
            createQ(35, 'Problem', 'Accruals', 'Salaries are paid every Friday for 5 days. Dec 31 is a Tuesday. Gross payroll ‚Ç±4,500,000/week. Adjustment?', ['Dr Sal Exp 1.8M, Cr Sal Pay 1.8M', 'Dr Sal Exp 4.5M, Cr Sal Pay 4.5M', 'Dr Sal Exp 900k, Cr Cash 900k', 'Dr Sal Pay 1.8M, Cr Cash 1.8M'], 'Dr Sal Exp 1.8M, Cr Sal Pay 1.8M', 'Mon, Tue = 2 days. 4.5M / 5 * 2 = 1,800,000.'),
            createQ(36, 'Theory', 'Nature', 'Accumulated Depreciation has a normal balance of:', ['Debit', 'Credit', 'Zero', 'Variable'], 'Credit', 'It is a contra-asset, so it has a credit balance.'),
            createQ(37, 'Problem', 'Depreciation', 'Machine bought Oct 1 for ‚Ç±8,400,000. Life 10 yrs, no salvage. Depr Expense for year ended Dec 31?', ['‚Ç±840,000', '‚Ç±210,000', '‚Ç±70,000', '‚Ç±2,100,000'], '‚Ç±210,000', 'Annual: 840k. Oct-Dec is 3 months. 840,000 * 3/12 = 210,000.'),
            createQ(38, 'Theory', 'Accruals', 'Accrued Revenue represents:', ['Assets', 'Liabilities', 'Expenses', 'Equity'], 'Assets', 'It represents a Receivable (Right to collect).'),
            createQ(39, 'Problem', 'Deferrals', 'Paid ‚Ç±900,000 for 3 months rent on Dec 1. Adjustment on Dec 31?', ['Dr Rent Exp 300k, Cr Prepaid Rent 300k', 'Dr Rent Exp 900k, Cr Cash 900k', 'Dr Prepaid Rent 600k, Cr Rent Exp 600k', 'Dr Rent Exp 600k, Cr Prepaid Rent 600k'], 'Dr Rent Exp 300k, Cr Prepaid Rent 300k', '1 month used (Dec). 900,000 / 3 = 300,000.'),
            createQ(40, 'Theory', 'Impact', 'Omitting unearned revenue adjustment (revenue earned) causes:', ['Liabilities Understated', 'Liabilities Overstated', 'Assets Overstated', 'Revenue Overstated'], 'Liabilities Overstated', 'The liability remains too high because you didn\'t reduce it for the earned portion.'),

            // --- Advanced Scenarios & Review (41-50) ---
            createQ(41, 'Problem', 'Accruals', 'Staff worked Dec 29-31. Payday Jan 4. Accrued amount ‚Ç±145,000. Entry Jan 4?', ['Dr Sal Exp 145k, Cr Cash', 'Dr Sal Pay 145k, Cr Cash', 'Dr Sal Exp, Dr Sal Pay, Cr Cash', 'Dr Cash, Cr Sal Pay'], 'Dr Sal Pay 145k, Cr Cash', 'Assuming the accrual was recorded Dec 31, Jan 4 pays off the liability.'),
            createQ(42, 'Theory', 'Deferrals', 'Deferred Revenue is another name for:', ['Accounts Receivable', 'Unearned Revenue', 'Accrued Revenue', 'Prepaid Income'], 'Unearned Revenue', 'Revenue is deferred to a future period.'),
            createQ(43, 'Problem', 'Deferrals', 'Beg Bal Prepaid Ins ‚Ç±450,000. Bought ‚Ç±600,000. End Bal ‚Ç±350,000. Expense?', ['‚Ç±700,000', '‚Ç±1,050,000', '‚Ç±100,000', '‚Ç±450,000'], '‚Ç±700,000', 'Available (450k+600k) = 1.05M. Less End (350k) = Used 700,000.'),
            createQ(44, 'Theory', 'Steps', 'Adjusting entries are step #___ in the accounting cycle.', ['Step 1', 'Step 4', 'Step 5', 'Step 7'], 'Step 5', 'Typically: ID, Journalize, Post, Unadjusted TB, Adjusting Entries.'),
            createQ(45, 'Problem', 'Accruals', 'Borrow ‚Ç±5,000,000 at 12% on Dec 1. Int Expense for Dec?', ['‚Ç±50,000', '‚Ç±600,000', '‚Ç±500,000', '‚Ç±100,000'], '‚Ç±50,000', '5M * 12% * 1/12 = 50,000.'),
            createQ(46, 'Theory', 'Real vs Nominal', 'Prepaid Rent is a ___ account, Rent Expense is a ___ account.', ['Nominal, Real', 'Real, Nominal', 'Real, Real', 'Nominal, Nominal'], 'Real, Nominal', 'Asset is Real (Permanent), Expense is Nominal (Temporary).'),
            createQ(47, 'Problem', 'Adjusting', 'If "Supplies Expense" was debited upon purchase (Expense Method) and ‚Ç±25,000 remains, the adjustment is:', ['Dr Supplies 25k, Cr Supplies Exp 25k', 'Dr Supplies Exp 25k, Cr Supplies 25k', 'Dr Supplies 25k, Cr Cash 25k', 'No entry'], 'Dr Supplies 25k, Cr Supplies Exp 25k', 'Restore the asset portion that remains.'),
            createQ(48, 'Theory', 'Accruals', 'Which creates an Accrued Expense?', ['Paying rent in advance', 'Using electricity before paying', 'Receiving cash for future service', 'Buying equipment'], 'Using electricity before paying', 'Expense incurred, but not yet paid.'),
            createQ(49, 'Problem', 'Deferrals', 'Subscription received ‚Ç±1,200,000 for 12 months starting July 1. Income recognized by Dec 31?', ['‚Ç±1,200,000', '‚Ç±600,000', '‚Ç±100,000', '‚Ç±0'], '‚Ç±600,000', 'July to Dec = 6 months. 1.2M * 6/12 = 600,000.'),
            createQ(50, 'Theory', 'Summary', 'The primary purpose of adjusting entries is to:', ['Correct errors', 'Obey tax laws', 'Update balances for accrual accounting', 'Close the books'], 'Update balances for accrual accounting', 'Ensures revenues/expenses are in correct period.')
        );
        // 2. WORKSHEET (Questions 51-100)
        // ==========================================
        questions.push(
            // --- Basic Worksheet Concepts & Theory (51-60) ---
            createQ(51, 'Theory', 'Worksheet', 'Which columns in the worksheet are directly used to calculate Net Income?', ['Trial Balance', 'Adjustments', 'Income Statement', 'Balance Sheet'], 'Income Statement', 'Net Income is derived from Revenue - Expenses found in the Income Statement columns.'),
            createQ(52, 'Problem', 'Worksheet', 'Income Statement Debits are ‚Ç±2,450,000 and Credits are ‚Ç±3,100,000. The result is:', ['Net Loss ‚Ç±650,000', 'Net Income ‚Ç±650,000', 'Net Income ‚Ç±5,550,000', 'Balanced'], 'Net Income ‚Ç±650,000', 'Credits (Revenue 3.1M) > Debits (Expenses 2.45M) = Net Income.'),
            createQ(53, 'Theory', 'Extension', 'Where is the Ending Inventory of ‚Ç±850,000 extended to in a periodic system?', ['Income Statement Debit', 'Income Statement Credit', 'Balance Sheet Debit', 'Balance Sheet Credit'], 'Balance Sheet Debit', 'Ending inventory is an Asset, so it appears in the Balance Sheet Debit column (and commonly IS Credit for COGS calc).'),
            createQ(54, 'Problem', 'Balancing', 'Adjusted TB Debit sum is ‚Ç±15,500,200 and Credit sum is ‚Ç±15,500,100. The error is:', ['‚Ç±100', '‚Ç±100,000', '‚Ç±10', '‚Ç±200'], '‚Ç±100', 'The difference between the totals indicates a calculation or extension error of ‚Ç±100.'),
            createQ(55, 'Theory', 'Process', 'The 10-column worksheet is classified as:', ['A formal financial statement', 'A mandatory government report', 'An optional internal working paper', 'A permanent ledger'], 'An optional internal working paper', 'It is a tool used by accountants to organize data before preparing formal statements.'),
            createQ(56, 'Problem', 'Net Loss', 'IS Debit total ‚Ç±1,250,000; IS Credit total ‚Ç±980,000. The balancing figure is entered in:', ['IS Debit & BS Credit', 'IS Credit & BS Debit', 'IS Debit & BS Debit', 'IS Credit & BS Credit'], 'IS Credit & BS Debit', 'Net Loss of ‚Ç±270k. Credit IS to balance the columns, Debit BS to reduce Equity.'),
            createQ(57, 'Theory', 'Columns', 'Prepaid Rent of ‚Ç±120,000 in the Adjusted TB is extended to:', ['Income Statement Debit', 'Balance Sheet Debit', 'Balance Sheet Credit', 'Income Statement Credit'], 'Balance Sheet Debit', 'Prepaid Rent is an unexpired asset, reported on the Balance Sheet.'),
            createQ(58, 'Problem', 'Adjustments', 'Unadj TB Supplies ‚Ç±45,000. Adjustment: Cr Supplies ‚Ç±32,000. Adjusted TB balance?', ['‚Ç±77,000 Debit', '‚Ç±13,000 Debit', '‚Ç±13,000 Credit', '‚Ç±32,000 Debit'], '‚Ç±13,000 Debit', 'Asset used: 45,000 (Dr) - 32,000 (Cr) = 13,000 remaining asset value.'),
            createQ(59, 'Theory', 'Sequence', 'The standard order of column pairs in a 10-column worksheet is:', ['Unadj TB, Adj, Adj TB, IS, BS', 'Adj, Unadj TB, IS, BS, Adj TB', 'BS, IS, Adj, Unadj TB', 'Unadj TB, IS, BS, Adj, Adj TB'], 'Unadj TB, Adj, Adj TB, IS, BS', 'Logical flow: Data -> Changes -> New Data -> Separation into Statements.'),
            createQ(60, 'Problem', 'Extension', 'Accumulated Depreciation of ‚Ç±1,200,000 is extended to:', ['IS Debit', 'IS Credit', 'BS Debit', 'BS Credit'], 'BS Credit', 'It is a contra-asset with a credit balance, reducing assets on the Balance Sheet.'),

            // --- Extension Logic & Account Classification (61-75) ---
            createQ(61, 'Theory', 'Real Accounts', 'Real (Permanent) accounts are extended to which columns?', ['Income Statement', 'Balance Sheet', 'Adjustments only', 'Trial Balance only'], 'Balance Sheet', 'Assets, Liabilities, and Equity are Real accounts.'),
            createQ(62, 'Problem', 'Extension', 'Salaries Payable of ‚Ç±45,500 is extended to:', ['IS Debit', 'BS Debit', 'BS Credit', 'IS Credit'], 'BS Credit', 'It is a current liability.'),
            createQ(63, 'Theory', 'Nominal Accounts', 'Nominal (Temporary) accounts are extended to which columns?', ['Income Statement', 'Balance Sheet', 'Adjustments only', 'Post-Closing TB'], 'Income Statement', 'Revenue and Expenses are Nominal accounts closed at year-end.'),
            createQ(64, 'Problem', 'Extension', 'Owner\'s Drawings of ‚Ç±350,000 is extended to:', ['IS Debit', 'BS Debit', 'BS Credit', 'IS Credit'], 'BS Debit', 'Drawings is a contra-equity account (Debit balance) found on the Balance Sheet.'),
            createQ(65, 'Theory', 'Liabilities', 'Unearned Revenue is extended to:', ['Income Statement Credit', 'Balance Sheet Credit', 'Income Statement Debit', 'Balance Sheet Debit'], 'Balance Sheet Credit', 'It is a liability representing an obligation to perform services.'),
            createQ(66, 'Problem', 'Calculations', 'Unadj TB Dr ‚Ç±5,000,000. Adj Dr ‚Ç±250,000. Adj Cr ‚Ç±0. Adjusted TB balance?', ['‚Ç±5,250,000 Debit', '‚Ç±4,750,000 Debit', '‚Ç±5,250,000 Credit', '‚Ç±4,750,000 Credit'], '‚Ç±5,250,000 Debit', 'Debit + Debit = Add. 5M + 250k = 5.25M.'),
            createQ(67, 'Theory', 'Profit', 'If the Income Statement Credit column total exceeds the Debit column total, it indicates:', ['Net Income', 'Net Loss', 'Break-even', 'Accounting Error'], 'Net Income', 'Revenues (Credits) are greater than Expenses (Debits).'),
            createQ(68, 'Problem', 'Extension', 'Professional Fees Earned of ‚Ç±8,400,000 is extended to:', ['IS Debit', 'IS Credit', 'BS Debit', 'BS Credit'], 'IS Credit', 'Revenue account increasing Net Income.'),
            createQ(69, 'Theory', 'Role', 'Does the worksheet replace the General Journal or Ledger?', ['Yes, it replaces both', 'No, it replaces neither', 'It replaces the Ledger', 'It replaces the Journal'], 'No, it replaces neither', 'It is a supplementary tool; entries must still be journalized and posted.'),
            createQ(70, 'Problem', 'Extension', 'Depreciation Expense - Building of ‚Ç±150,000 is extended to:', ['IS Debit', 'IS Credit', 'BS Debit', 'BS Credit'], 'IS Debit', 'It is an expense account.'),
            createQ(71, 'Theory', 'Headers', 'A proper worksheet heading includes Company Name, "Worksheet", and:', ['Current Date', 'Period Covered', 'Date of Incorporation', 'Owner Name'], 'Period Covered', 'e.g., "For the Year Ended December 31, 2023".'),
            createQ(72, 'Problem', 'Extension', 'Accounts Receivable of ‚Ç±2,100,500 is extended to:', ['IS Debit', 'BS Debit', 'BS Credit', 'IS Credit'], 'BS Debit', 'It is a current asset.'),
            createQ(73, 'Theory', 'Loss Display', 'A Net Loss is shown in the Balance Sheet columns as a:', ['Debit', 'Credit', 'Negative Liability', 'Asset'], 'Debit', 'Since Equity is Credit, a Loss (reduction of Equity) is entered in the Debit column.'),
            createQ(74, 'Problem', 'Calculations', 'Adj TB Credit ‚Ç±850,000. Adj Debit ‚Ç±50,000. Adjusted TB balance?', ['‚Ç±900,000 Credit', '‚Ç±800,000 Credit', '‚Ç±800,000 Debit', '‚Ç±900,000 Debit'], '‚Ç±800,000 Credit', 'Credit balance 850k - Debit adjustment 50k = 800k Credit.'),
            createQ(75, 'Theory', 'FS Prep', 'Can Financial Statements be prepared directly from the Worksheet columns?', ['Yes', 'No', 'Only the Income Statement', 'Only the Balance Sheet'], 'Yes', 'The columns sort the data exactly as needed for the formal statements.'),

            // --- Advanced Calculations & Scenario Analysis (76-90) ---
            createQ(76, 'Problem', 'Math', 'Total IS Debits ‚Ç±4,200,000. Total IS Credits ‚Ç±5,800,000. Net Income is:', ['‚Ç±1,600,000', '‚Ç±10,000,000', '‚Ç±4,200,000', '‚Ç±5,800,000'], '‚Ç±1,600,000', '5.8M (Rev) - 4.2M (Exp) = 1.6M Income.'),
            createQ(77, 'Theory', 'Troubleshooting', 'If worksheet columns do not balance, the most efficient first step is:', ['Re-add the columns', 'Restart the worksheet', 'Plug the difference', 'Skip to FS'], 'Re-add the columns', 'Check for simple arithmetic errors before auditing individual entries.'),
            createQ(78, 'Problem', 'Extension', 'Owner\'s Capital (Beginning) of ‚Ç±10,500,000 is extended to:', ['IS Credit', 'BS Credit', 'IS Debit', 'BS Debit'], 'BS Credit', 'Equity account. Note: End Capital is calculated on the formal FS, not the worksheet.'),
            createQ(79, 'Theory', 'Adjustments', 'The Adjustments columns in the worksheet reflect:', ['Entries already posted', 'Proposed end-of-period entries', 'Prior year corrections', 'Cash transactions'], 'Proposed end-of-period entries', 'They show how accounts must be updated before statements are generated.'),
            createQ(80, 'Problem', 'Math', 'BS Debit Total ‚Ç±15,000,000, BS Credit Total ‚Ç±12,500,000. The difference is:', ['Net Income ‚Ç±2,500,000', 'Net Loss ‚Ç±2,500,000', 'Error ‚Ç±2,500,000', 'Drawings ‚Ç±2,500,000'], 'Net Income ‚Ç±2,500,000', 'Assets (Dr) > Liab+BegCap (Cr). The difference is the NI needed to balance the Equity.'),
            createQ(81, 'Theory', 'Extension Rule', 'Typically, an account balance is extended to how many columns?', ['One', 'Two', 'Three', 'Four'], 'One', 'Either IS Dr, IS Cr, BS Dr, or BS Cr. (Exceptions exist for periodic inventory methods).'),
            createQ(82, 'Problem', 'Extension', 'Interest Payable of ‚Ç±12,500 is extended to:', ['IS Debit', 'BS Debit', 'BS Credit', 'IS Credit'], 'BS Credit', 'Current Liability.'),
            createQ(83, 'Theory', 'Equality', 'In the Adjusted TB columns, Total Debits must equal:', ['Total Credits', 'Net Income', 'Total Assets', 'Zero'], 'Total Credits', 'The fundamental accounting equation must hold true before extending to IS/BS.'),
            createQ(84, 'Problem', 'Extension', 'Rent Income of ‚Ç±240,000 is extended to:', ['IS Debit', 'IS Credit', 'BS Debit', 'BS Credit'], 'IS Credit', 'Revenue Account.'),
            createQ(85, 'Theory', 'Columns', 'The "Adjustments" columns total Debits must equal:', ['Adjustments total Credits', 'Net Income', 'Unadj TB Debits', 'Zero'], 'Adjustments total Credits', 'Every adjusting entry has equal debits and credits.'),
            createQ(86, 'Problem', 'Extension', 'Allowance for Bad Debts ‚Ç±45,000 is extended to:', ['BS Debit', 'BS Credit', 'IS Debit', 'IS Credit'], 'BS Credit', 'Contra-Asset. It sits in the BS Credit column to offset A/R.'),
            createQ(87, 'Theory', 'Timing', 'Journalizing and posting of adjusting entries happens ___ the worksheet is completed.', ['Before', 'After', 'During', 'Instead of'], 'After', 'The worksheet is the "draft" phase; the formal journalizing happens after approval.'),
            createQ(88, 'Problem', 'Math', 'Unadj TB Dr ‚Ç±100,000. Adj Dr ‚Ç±50,000. Adj Cr ‚Ç±20,000. Adjusted TB Dr?', ['‚Ç±130,000', '‚Ç±170,000', '‚Ç±70,000', '‚Ç±30,000'], '‚Ç±130,000', '100k + 50k - 20k = 130k.'),
            createQ(89, 'Theory', 'Periodic Inv', 'In a Periodic Inventory worksheet, Beginning Inventory is extended to:', ['IS Debit', 'IS Credit', 'BS Debit', 'BS Credit'], 'IS Debit', 'It is treated as a component of Cost of Goods Sold (Expense-like).'),
            createQ(90, 'Problem', 'Extension', 'Doubtful Accounts Expense of ‚Ç±15,200 is extended to:', ['BS Debit', 'IS Debit', 'IS Credit', 'BS Credit'], 'IS Debit', 'Operating Expense.'),

            // --- Final Review & Complex Extension (91-100) ---
            createQ(91, 'Theory', 'Operations', 'Which set of worksheet columns represents the "Result of Operations"?', ['Trial Balance', 'Adjustments', 'Income Statement', 'Balance Sheet'], 'Income Statement', 'It calculates profitability (Net Income/Loss).'),
            createQ(92, 'Problem', 'Extension', 'Mortgage Payable (due 2030) of ‚Ç±5,000,000 is extended to:', ['IS Credit', 'BS Debit', 'BS Credit', 'IS Debit'], 'BS Credit', 'Non-Current Liability.'),
            createQ(93, 'Theory', 'Errors', 'If a ‚Ç±1,000 debit is accidentally entered as a credit, the totals will differ by:', ['‚Ç±1,000', '‚Ç±500', '‚Ç±2,000', '‚Ç±0'], '‚Ç±2,000', 'The error doubles: you lost 1000 on the debit side and added 1000 to the credit side.'),
            createQ(94, 'Problem', 'Extension', 'Notes Receivable of ‚Ç±250,000 is extended to:', ['IS Debit', 'BS Debit', 'BS Credit', 'IS Credit'], 'BS Debit', 'Asset account.'),
            createQ(95, 'Theory', 'Confidentiality', 'Is the worksheet distributed to shareholders?', ['Yes, in the annual report', 'No, it is internal', 'Only to preferred shareholders', 'Yes, upon request'], 'No, it is internal', 'Only the formal Financial Statements are distributed.'),
            createQ(96, 'Problem', 'Extension', 'Supplies Expense of ‚Ç±32,400 is extended to:', ['IS Debit', 'BS Debit', 'BS Credit', 'IS Credit'], 'IS Debit', 'Expense account.'),
            createQ(97, 'Theory', 'Balancing IS', 'To balance the Income Statement columns for Net Income, you add the difference to the:', ['Debit side', 'Credit side', 'Both sides', 'Neither'], 'Debit side', 'Expenses (Dr) + Net Income = Revenue (Cr).'),
            createQ(98, 'Problem', 'Extension', 'Land (held for use) of ‚Ç±12,500,000 is extended to:', ['IS Debit', 'BS Debit', 'BS Credit', 'IS Credit'], 'BS Debit', 'Property, Plant, and Equipment (Asset).'),
            createQ(99, 'Theory', 'Purpose', 'One of the main purposes of the worksheet is to:', ['Replace the journal', 'Check for arithmetic errors before posting', 'Avoid paying taxes', 'Calculate employee bonuses'], 'Check for arithmetic errors before posting', 'It ensures the books will balance before formally recording adjustments.'),
            createQ(100, 'Problem', 'Math', 'IS Credits ‚Ç±8,500,000; IS Debits ‚Ç±9,200,000. The balancing entry is:', ['‚Ç±700,000 in IS Credit', '‚Ç±700,000 in IS Debit', '‚Ç±700,000 in BS Debit', '‚Ç±700,000 in BS Credit'], '‚Ç±700,000 in IS Credit', 'Net Loss of 700k. Add to Revenue side (Credit) to balance the IS columns.')
        );
// ==========================================
        // 3. FINANCIAL STATEMENTS (Questions 101-150)
        // ==========================================
        questions.push(
            // --- Basic FS Concepts & Balance Sheet (101-115) ---
            createQ(101, 'Theory', 'Fin. Statements', 'Which statement reports financial position at a point in time?', ['Income Statement', 'Statement of Changes in Equity', 'Balance Sheet', 'Cash Flow'], 'Balance Sheet', 'It is a snapshot of Assets, Liabilities, and Equity.'),
            createQ(102, 'Problem', 'Equity', 'Beg. Capital ‚Ç±10,500,000, Net Income ‚Ç±2,400,000, Drawings ‚Ç±800,000. End Capital is:', ['‚Ç±12,100,000', '‚Ç±13,700,000', '‚Ç±9,700,000', '‚Ç±12,900,000'], '‚Ç±12,100,000', '10.5M + 2.4M - 0.8M = 12.1M.'),
            createQ(103, 'Theory', 'Classification', 'Land held for long-term capital appreciation is classified as:', ['Property, Plant, and Equipment', 'Current Asset', 'Investment Property', 'Intangible Asset'], 'Investment Property', 'It is not used in production or supply of goods/services.'),
            createQ(104, 'Problem', 'Current Assets', 'Cash ‚Ç±500,000, A/R ‚Ç±1,200,000, Supplies ‚Ç±300,000, Building ‚Ç±15,000,000. Total Current Assets?', ['‚Ç±17,000,000', '‚Ç±2,000,000', '‚Ç±1,700,000', '‚Ç±1,500,000'], '‚Ç±2,000,000', 'Cash + A/R + Supplies (Building is Non-Current).'),
            createQ(105, 'Theory', 'SCI', 'The heading of an Income Statement must include:', ['"As of"', '"For the Year Ended"', '"At"', '"On"'], '"For the Year Ended"', 'It covers a period of time, unlike the Balance Sheet.'),
            createQ(106, 'Problem', 'Net Income', 'Service Revenue ‚Ç±8,500,000, Operating Exp ‚Ç±5,200,000, Interest Exp ‚Ç±300,000. Net Income?', ['‚Ç±3,300,000', '‚Ç±3,000,000', '‚Ç±3,600,000', '‚Ç±8,200,000'], '‚Ç±3,000,000', '8.5M - 5.2M - 0.3M = 3.0M.'),
            createQ(107, 'Theory', 'Liquidity', 'Assets in the Statement of Financial Position are typically arranged by:', ['Alphabetical order', 'Liquidity', 'Magnitude', 'Age of asset'], 'Liquidity', 'From most liquid (Cash) to least liquid (PPE/Intangibles).'),
            createQ(108, 'Problem', 'Liabilities', 'A/P ‚Ç±450,000, Notes Payable (due 2030) ‚Ç±5,000,000, Salaries Pay ‚Ç±150,000. Total Current Liab?', ['‚Ç±5,600,000', '‚Ç±600,000', '‚Ç±5,150,000', '‚Ç±450,000'], '‚Ç±600,000', 'A/P + Salaries Payable. The Note is Non-Current.'),
            createQ(109, 'Theory', 'Cash Flow', 'Payment of dividends or drawings is classified as what type of activity?', ['Operating', 'Investing', 'Financing', 'Non-cash'], 'Financing', 'Transactions with owners are financing activities.'),
            createQ(110, 'Problem', 'Forms', 'Which form of Balance Sheet lists Assets on the left and Liabilities/Equity on the right?', ['Report Form', 'Account Form', 'Single Step', 'Multi Step'], 'Account Form', 'It resembles the T-Account structure.'),
            createQ(111, 'Theory', 'Operating Cycle', 'Current assets are expected to be realized within:', ['12 months or operating cycle, whichever is longer', '6 months', '3 years', 'The tax year'], '12 months or operating cycle, whichever is longer', 'Standard definition of current assets.'),
            createQ(112, 'Problem', 'Gross Profit', 'Sales ‚Ç±15,000,000. Cost of Goods Sold ‚Ç±9,000,000. Operating Exp ‚Ç±2,000,000. Gross Profit is:', ['‚Ç±4,000,000', '‚Ç±6,000,000', '‚Ç±13,000,000', '‚Ç±11,000,000'], '‚Ç±6,000,000', 'Sales - COGS = Gross Profit (15M - 9M = 6M). Op Exp is deducted later.'),
            createQ(113, 'Theory', 'Intangibles', 'Which of the following is an Intangible Asset?', ['Inventory', 'Patent', 'Accounts Receivable', 'Building'], 'Patent', 'Identifiable non-monetary asset without physical substance.'),
            createQ(114, 'Problem', 'Total Equity', 'Total Assets ‚Ç±25,000,000. Total Liabilities ‚Ç±10,000,000. Total Equity is:', ['‚Ç±35,000,000', '‚Ç±15,000,000', '‚Ç±25,000,000', '‚Ç±10,000,000'], '‚Ç±15,000,000', 'Assets - Liabilities = Equity (Accounting Equation).'),
            createQ(115, 'Theory', 'Notes', 'The "Notes to Financial Statements" are:', ['Optional', 'Integral part of FS', 'Only for tax purposes', 'Internal use only'], 'Integral part of FS', 'They provide necessary details and accounting policies.'),

            // --- Income Statement & Calculations (116-130) ---
            createQ(116, 'Problem', 'Operating Exp', 'Rent ‚Ç±120,000, Salaries ‚Ç±500,000, Advertising ‚Ç±80,000, Interest ‚Ç±50,000. Total Operating Exp?', ['‚Ç±750,000', '‚Ç±700,000', '‚Ç±620,000', '‚Ç±580,000'], '‚Ç±700,000', 'Rent + Salaries + Ads. Interest is a Finance Cost (Non-Operating).'),
            createQ(117, 'Theory', 'SCF Purpose', 'The primary purpose of the Statement of Cash Flows is to provide info about:', ['Profitability', 'Cash receipts and payments', 'Assets and Liabilities', 'Equity changes'], 'Cash receipts and payments', 'It tracks the movement of cash in/out.'),
            createQ(118, 'Problem', 'Net Sales', 'Sales ‚Ç±2,000,000. Sales Returns ‚Ç±100,000. Sales Discounts ‚Ç±50,000. Net Sales?', ['‚Ç±2,150,000', '‚Ç±1,850,000', '‚Ç±2,000,000', '‚Ç±1,900,000'], '‚Ç±1,850,000', '2M - 100k - 50k = 1.85M.'),
            createQ(119, 'Theory', 'Presentation', 'In a Report Form Balance Sheet, assets are presented:', ['Top to bottom', 'Side by side', 'Randomly', 'By color'], 'Top to bottom', 'Assets above Liabilities and Equity.'),
            createQ(120, 'Problem', 'Complex Equity', 'Beg Cap ‚Ç±5M. Additional Inv ‚Ç±1M. Net Loss ‚Ç±500k. Draw ‚Ç±200k. End Cap?', ['‚Ç±6,300,000', '‚Ç±5,300,000', '‚Ç±5,700,000', '‚Ç±4,300,000'], '‚Ç±5,300,000', '5M + 1M - 0.5M - 0.2M = 5.3M.'),
            createQ(121, 'Theory', 'Format', 'A "Multi-Step" Income Statement distinguishes between:', ['Cash and Non-cash', 'Operating and Non-operating activities', 'Assets and Liabilities', 'Real and Nominal'], 'Operating and Non-operating activities', 'It separates Gross Profit, Operating Income, and Net Income.'),
            createQ(122, 'Problem', 'Investing CF', 'Sold equipment for ‚Ç±200,000. Bought land for ‚Ç±1,000,000. Net Investing Cash Flow?', ['(‚Ç±800,000)', '‚Ç±800,000', '‚Ç±1,200,000', '(‚Ç±1,200,000)'], '(‚Ç±800,000)', 'Inflow 200k - Outflow 1M = Net Outflow 800k.'),
            createQ(123, 'Theory', 'Basis', 'Financial statements are prepared under which basis (except SCF)?', ['Cash Basis', 'Accrual Basis', 'Tax Basis', 'Liquidation Basis'], 'Accrual Basis', 'Revenue/Expenses recorded when incurred, not just when cash moves.'),
            createQ(124, 'Problem', 'Working Capital', 'Current Assets ‚Ç±8,500,000. Current Liabilities ‚Ç±3,500,000. Working Capital?', ['‚Ç±12,000,000', '‚Ç±5,000,000', '‚Ç±2,500,000', '‚Ç±8,500,000'], '‚Ç±5,000,000', 'CA - CL = Working Capital.'),
            createQ(125, 'Theory', 'Assumption', 'The assumption that an entity will continue indefinitely is:', ['Monetary Unit', 'Going Concern', 'Time Period', 'Entity Concept'], 'Going Concern', 'Assumption justifying historical cost and long-term depreciation.'),
            createQ(126, 'Problem', 'Change in Equity', 'Equity increased by ‚Ç±1,500,000. Drawings were ‚Ç±500,000. No investments. Net Income?', ['‚Ç±1,000,000', '‚Ç±2,000,000', '‚Ç±1,500,000', '‚Ç±500,000'], '‚Ç±2,000,000', 'Increase = NI - Drawings. 1.5M = NI - 0.5M -> NI = 2.0M.'),
            createQ(127, 'Theory', 'Consistency', 'Using the same accounting methods year to year refers to:', ['Comparability', 'Consistency', 'Relevance', 'Timeliness'], 'Consistency', 'Allows users to compare FS over time.'),
            createQ(128, 'Problem', 'Book Value', 'Building Cost ‚Ç±20,000,000. Accum Depr ‚Ç±4,500,000. Book Value?', ['‚Ç±24,500,000', '‚Ç±15,500,000', '‚Ç±20,000,000', '‚Ç±16,500,000'], '‚Ç±15,500,000', 'Cost - Accumulated Depreciation.'),
            createQ(129, 'Theory', 'Materiality', 'An item is material if its omission could:', ['Influence economic decisions of users', 'Save tax money', 'Simplify the ledger', 'Reduce audit fees'], 'Influence economic decisions of users', 'The threshold for recognition/disclosure.'),
            createQ(130, 'Problem', 'Comprehensive', 'Net Income ‚Ç±5M. Other Comprehensive Income (Gain on Reval) ‚Ç±1M. Total Comp Income?', ['‚Ç±5,000,000', '‚Ç±6,000,000', '‚Ç±4,000,000', '‚Ç±1,000,000'], '‚Ç±6,000,000', 'NI + OCI = Total Comprehensive Income.'),

            // --- Analysis & Advanced Topics (131-150) ---
            createQ(131, 'Theory', 'Contra Revenue', 'Sales Returns and Allowances is presented as:', ['Operating Expense', 'Deduction from Sales', 'Current Liability', 'Other Income'], 'Deduction from Sales', 'It is a contra-revenue account.'),
            createQ(132, 'Problem', 'Inventory', 'Beg Inv ‚Ç±2M. Purchases ‚Ç±10M. End Inv ‚Ç±3M. Cost of Goods Sold?', ['‚Ç±15,000,000', '‚Ç±9,000,000', '‚Ç±12,000,000', '‚Ç±8,000,000'], '‚Ç±9,000,000', 'GAS (12M) - End Inv (3M) = COGS 9M.'),
            createQ(133, 'Theory', 'Elements', 'Which is NOT an element of the Financial Statements?', ['Asset', 'Liability', 'Trial Balance', 'Income'], 'Trial Balance', 'The TB is an internal working paper, not a formal element defined by the conceptual framework.'),
            createQ(134, 'Problem', 'Depreciation', 'Depreciation Expense was ‚Ç±250,000. How does this affect the Cash Flow Statement (Indirect)?', ['Deducted from NI', 'Added back to NI', 'Investing Outflow', 'Financing Inflow'], 'Added back to NI', 'Non-cash expense, so it is added back to reconcile Net Income to Cash.'),
            createQ(135, 'Theory', 'Limitations', 'A limitation of Financial Statements is:', ['They use exact numbers only', 'They ignore qualitative factors', 'They are always 100% accurate', 'They predict the future perfectly'], 'They ignore qualitative factors', 'FS capture money, not employee morale or brand reputation.'),
            createQ(136, 'Problem', 'Interest', 'Loan ‚Ç±10M at 10%. Interest paid ‚Ç±1M. Where is this in the Income Statement?', ['Operating Expense', 'Finance Cost', 'Deduction from Sales', 'Investing Activity'], 'Finance Cost', 'Interest expense is usually separated from Ops Expenses.'),
            createQ(137, 'Theory', 'Users', 'Investors and Creditors are considered:', ['Internal Users', 'External Users', 'Management', 'Regulatory Agencies'], 'External Users', 'They do not run the business day-to-day.'),
            createQ(138, 'Problem', 'Solvency', 'Total Assets ‚Ç±10M. Total Liabilities ‚Ç±8M. Equity Ratio?', ['80%', '20%', '10%', '100%'], '20%', 'Equity (2M) / Assets (10M) = 20%.'),
            createQ(139, 'Theory', 'Characteristics', 'Information that is free from error and bias is:', ['Relevant', 'Faithful Representation', 'Timely', 'Understandable'], 'Faithful Representation', 'It accurately depicts the economic substance.'),
            createQ(140, 'Problem', 'Bad Debts', 'A/R ‚Ç±2,000,000. Allowance for Bad Debts ‚Ç±150,000. Net Realizable Value?', ['‚Ç±2,150,000', '‚Ç±1,850,000', '‚Ç±2,000,000', '‚Ç±150,000'], '‚Ç±1,850,000', 'A/R - Allowance = NRV.'),
            createQ(141, 'Theory', 'Events', 'Events after reporting period that provide evidence of conditions existing at year-end:', ['Adjusting Events', 'Non-adjusting Events', 'Forecasts', 'Budgets'], 'Adjusting Events', 'FS must be adjusted to reflect this new evidence.'),
            createQ(142, 'Problem', 'Supplies', 'Beg Supplies ‚Ç±100k. Bought ‚Ç±400k. Expensed ‚Ç±300k. End Balance on SFP?', ['‚Ç±200,000', '‚Ç±500,000', '‚Ç±300,000', '‚Ç±100,000'], '‚Ç±200,000', 'Avail 500k - Used 300k = End 200k.'),
            createQ(143, 'Theory', 'Interim', 'Financial statements covering periods less than one year are:', ['Annual', 'Interim', 'Pro-forma', 'Draft'], 'Interim', 'e.g., Quarterly or Monthly statements.'),
            createQ(144, 'Problem', 'Cash Calc', 'Bank Balance ‚Ç±500k. Cash on Hand ‚Ç±50k. Post-dated check received ‚Ç±20k. Cash on SFP?', ['‚Ç±570,000', '‚Ç±550,000', '‚Ç±520,000', '‚Ç±500,000'], '‚Ç±550,000', 'Bank + Hand. Post-dated checks received are not cash until date arrives.'),
            createQ(145, 'Theory', 'Conservatism', 'Choosing the method that least overstates assets/income is:', ['Conservatism/Prudence', 'Matching', 'Consistency', 'Accrual'], 'Conservatism/Prudence', 'When in doubt, record the loss/liability sooner.'),
            createQ(146, 'Problem', 'Prepayments', 'Prepaid Insurance ‚Ç±240,000. If this expires next year, where is it in SFP?', ['Current Liability', 'Current Asset', 'Non-Current Asset', 'Equity'], 'Current Asset', 'Benefit will be realized within 12 months.'),
            createQ(147, 'Theory', 'Full Disclosure', 'Requires disclosing circumstances/events that make a difference to users:', ['Full Disclosure Principle', 'Cost Principle', 'Revenue Recognition', 'Matching'], 'Full Disclosure Principle', 'Transparency in footnotes.'),
            createQ(148, 'Problem', 'Profit Margin', 'Net Income ‚Ç±500,000. Net Sales ‚Ç±5,000,000. Profit Margin?', ['50%', '5%', '20%', '10%'], '10%', '500k / 5M = 10%.'),
            createQ(149, 'Theory', 'Sequence', 'The correct order of preparation is:', ['SFP -> IS -> SCE', 'IS -> SCE -> SFP', 'SCE -> SFP -> IS', 'Any order'], 'IS -> SCE -> SFP', 'NI from IS goes to SCE; End Equity from SCE goes to SFP.'),
            createQ(150, 'Problem', 'End Retained Earnings', 'Beg RE ‚Ç±1,000,000. Net Income ‚Ç±500,000. Dividends ‚Ç±200,000. End RE?', ['‚Ç±1,300,000', '‚Ç±1,500,000', '‚Ç±700,000', '‚Ç±1,700,000'], '‚Ç±1,300,000', '1M + 500k - 200k = 1.3M.')
        );
        // 4. ADJUSTING ENTRIES (Questions 151-200)
        // ==========================================
        questions.push(
            // --- Deferrals: Prepayments & Unearned Revenue ---
            createQ(151, 'Theory', 'Journalizing', 'The entry to record depreciation includes a debit to:', ['Equipment', 'Accumulated Depreciation', 'Depreciation Expense', 'Cash'], 'Depreciation Expense', 'Expense is recognized (Debit) and the Contra-Asset Accumulated Depreciation increases (Credit).'),
            createQ(152, 'Problem', 'Supplies', 'Supplies Account balance is ‚Ç±250,000. Physical count shows ‚Ç±50,000 on hand. The adjustment is:', ['‚Ç±200,000', '‚Ç±50,000', '‚Ç±300,000', '‚Ç±250,000'], '‚Ç±200,000', 'Used = Beginning Balance - Ending Inventory. 250,000 - 50,000 = 200,000.'),
            createQ(153, 'Theory', 'Bad Debts', 'Allowance for Bad Debts is classified as a:', ['Contra-Asset', 'Liability', 'Expense', 'Revenue'], 'Contra-Asset', 'It reduces the book value of Accounts Receivable on the Balance Sheet.'),
            createQ(154, 'Problem', 'Bad Debts', 'Sales are ‚Ç±8,500,000. Estimate bad debts at 2% of sales. The entry is:', ['Debit Bad Debt Expense 170,000; Credit Accounts Receivable 170,000', 'Debit Bad Debt Expense 170,000; Credit Allowance for Bad Debts 170,000', 'Debit Allowance for Bad Debts 170,000; Credit Accounts Receivable 170,000', 'No entry required'], 'Debit Bad Debt Expense 170,000; Credit Allowance for Bad Debts 170,000', '8,500,000 * 2% = 170,000. Recorded using the Allowance Method.'),
            createQ(155, 'Theory', 'Book Value', 'Net Book Value of Receivables is calculated as:', ['Accounts Receivable + Allowance for Bad Debts', 'Accounts Receivable - Allowance for Bad Debts', 'Sales - Bad Debt Expense', 'Accounts Receivable only'], 'Accounts Receivable - Allowance for Bad Debts', 'It represents the gross amount less the estimated uncollectible amount.'),
            createQ(156, 'Problem', 'Depreciation', 'Asset Cost is ‚Ç±2,500,000. No salvage value. Useful life is 5 years. What is the Accumulated Depreciation after 2 years?', ['‚Ç±500,000', '‚Ç±1,000,000', '‚Ç±2,500,000', '‚Ç±1,500,000'], '‚Ç±1,000,000', 'Annual Depreciation = 2,500,000 / 5 = 500,000. After 2 years = 1,000,000.'),
            createQ(157, 'Theory', 'Accruals', 'To record accrued salaries at year-end, you Debit:', ['Salaries Payable', 'Cash', 'Salaries Expense', 'Retained Earnings'], 'Salaries Expense', 'You must recognize the expense in the period it was incurred, even if unpaid.'),
            createQ(158, 'Problem', 'Prepaids', 'Prepaid Insurance balance is ‚Ç±360,000 (1 year policy bought July 1). What is the Adjusting Entry amount on December 31?', ['‚Ç±180,000', '‚Ç±360,000', '‚Ç±30,000', '‚Ç±90,000'], '‚Ç±180,000', '6 months have passed (July-Dec). 360,000 * 6/12 = 180,000.'),
            createQ(159, 'Theory', 'Unearned', 'To adjust Unearned Revenue for the amount earned, you Debit:', ['Revenue', 'Unearned Revenue', 'Cash', 'Accounts Receivable'], 'Unearned Revenue', 'Decrease the Liability (Debit Unearned Revenue) and increase Revenue (Credit Revenue).'),
            createQ(160, 'Problem', 'Interest', 'Note Payable of ‚Ç±1,000,000 at 12% interest has been outstanding for 3 months. The interest accrual entry amount is:', ['‚Ç±120,000', '‚Ç±30,000', '‚Ç±10,000', '‚Ç±300,000'], '‚Ç±30,000', 'Calculation: 1,000,000 * 12% * 3/12 = 30,000.'),

            // --- Methods & Contra Accounts ---
            createQ(161, 'Theory', 'Methods', 'In the Asset Method for supplies, the initial purchase is debited to:', ['Supplies Expense', 'Supplies (Asset)', 'Cash', 'Accounts Payable'], 'Supplies (Asset)', 'The purchase is capitalized as an asset first, then expensed as used.'),
            createQ(162, 'Problem', 'Bad Debts', 'Accounts Receivable is ‚Ç±5,000,000. Allowance required is 10%. Current Allowance balance is ‚Ç±50,000 Credit. The adjustment is:', ['‚Ç±500,000', '‚Ç±450,000', '‚Ç±550,000', '‚Ç±50,000'], '‚Ç±450,000', 'Target is 500,000 (10% of 5M). Existing is 50,000. Adjustment needed = 450,000.'),
            createQ(163, 'Theory', 'Contra', 'Which of the following is NOT a contra account?', ['Allowance for Bad Debts', 'Accumulated Depreciation', 'Sales Returns', 'Freight Out'], 'Freight Out', 'Freight Out is a regular Operating Expense account.'),
            createQ(164, 'Problem', 'Depreciation', 'The Straight Line Rate for an asset with an 8-year useful life is:', ['10%', '12.5%', '20%', '8%'], '12.5%', '100% / 8 years = 12.5% per year.'),
            createQ(165, 'Theory', 'Format', 'Adjusting entries are usually dated as of:', ['The first day of the month', 'The last day of the accounting period', 'The date of payment', 'Anytime during the year'], 'The last day of the accounting period', 'They bring the books up to date as of the closing date.'),
            createQ(166, 'Problem', 'Prepaids', 'Rent paid in advance ‚Ç±2,400,000 (2 years) was debited to Rent Expense. Year 1 ends. What is the Adjusting Entry?', ['Debit Prepaid Rent 1,200,000; Credit Rent Expense 1,200,000', 'Debit Rent Expense 1,200,000; Credit Prepaid Rent 1,200,000', 'Debit Prepaid Rent 2,400,000; Credit Rent Expense 2,400,000', 'No entry required'], 'Debit Prepaid Rent 1,200,000; Credit Rent Expense 1,200,000', 'Expense method used. Move the unused portion (1 year = 1,200,000) to Asset.'),
            createQ(167, 'Theory', 'Accruals', 'Omission of an accrued revenue adjustment results in:', ['Understated Assets', 'Overstated Assets', 'Overstated Equity', 'Correct Assets'], 'Understated Assets', 'The Receivable (Asset) and Revenue (Equity) are missing.'),
            createQ(168, 'Problem', 'Interest', 'Interest Receivable beginning balance ‚Ç±0. Accrued during period ‚Ç±15,000. Received ‚Ç±0. Ending balance?', ['‚Ç±0', '‚Ç±15,000', '‚Ç±30,000', 'Negative ‚Ç±15,000'], '‚Ç±15,000', 'The accrual increases the receivable balance.'),
            createQ(169, 'Theory', 'Prepaids', 'If the Asset Method is used, the adjusting entry involves a Debit to:', ['Asset', 'Expense', 'Liability', 'Revenue'], 'Expense', 'You are transferring the expired cost from the Asset account to the Expense account.'),
            createQ(170, 'Problem', 'Bad Debts', 'Write-off of a ‚Ç±35,000 account under the Allowance method. The entry is:', ['Debit Bad Debt Expense; Credit Accounts Receivable', 'Debit Allowance for Bad Debts; Credit Accounts Receivable', 'Debit Bad Debt Expense; Credit Allowance for Bad Debts', 'Debit Accounts Receivable; Credit Allowance for Bad Debts'], 'Debit Allowance for Bad Debts; Credit Accounts Receivable', 'This reduces both the gross Receivable and the Allowance, keeping Net Book Value the same.'),

            // --- Advanced Calculations ---
            createQ(171, 'Theory', 'Depreciation', 'Double Declining Balance is a type of:', ['Accelerated Depreciation', 'Straight Line', 'Activity Method', 'Amortization'], 'Accelerated Depreciation', 'It recognizes higher expense in the early years of an asset\'s life.'),
            createQ(172, 'Problem', 'Amortization', 'Patent cost ‚Ç±2,000,000, useful life 10 years, legal life 20 years. Annual Amortization Expense?', ['‚Ç±100,000', '‚Ç±200,000', '‚Ç±2,000,000', '‚Ç±400,000'], '‚Ç±200,000', 'Use the shorter of useful life or legal life. 2,000,000 / 10 = 200,000.'),
            createQ(173, 'Theory', 'Purpose', 'Adjusting entries ensure compliance with the:', ['Matching Principle', 'Cost Principle', 'Full Disclosure Principle', 'Conservatism Principle'], 'Matching Principle', 'Matching expenses to the revenues they helped generate in the same period.'),
            createQ(174, 'Problem', 'Deferrals', 'Unearned Service Revenue balance ‚Ç±500,000. 40% has been earned. The Adjusting Entry credits:', ['Service Revenue ‚Ç±200,000', 'Service Revenue ‚Ç±300,000', 'Unearned Revenue ‚Ç±200,000', 'Cash ‚Ç±200,000'], 'Service Revenue ‚Ç±200,000', '500,000 * 40% = 200,000. This amount is credited to Revenue.'),
            createQ(175, 'Theory', 'Accruals', 'Accrued Income Tax is recorded as:', ['Debit Deferred Tax Asset', 'Debit Income Tax Expense, Credit Income Tax Payable', 'Debit Cash', 'Credit Income Tax Expense'], 'Debit Income Tax Expense, Credit Income Tax Payable', 'Expense is incurred but payment will be made later.'),
            createQ(176, 'Problem', 'Supplies', 'Supplies Expense (Debit) ‚Ç±80,000. Ending inventory count ‚Ç±20,000. Expense method used. Adjustment?', ['Debit Supplies 20,000; Credit Supplies Expense 20,000', 'Debit Supplies Expense 60,000; Credit Supplies 60,000', 'Debit Supplies 60,000; Credit Supplies Expense 60,000', 'No Entry'], 'Debit Supplies 20,000; Credit Supplies Expense 20,000', 'Restore the asset value of what remains on hand (20,000).'),
            createQ(177, 'Theory', 'Recovery', 'Recovery of a previously written off account requires:', ['1 entry', '2 entries', '3 entries', 'No entries'], '2 entries', 'First, reverse the write-off to re-establish the Receivable. Second, record the Cash collection.'),
            createQ(178, 'Problem', 'Depreciation', 'Cost ‚Ç±3,200,000, Salvage Value ‚Ç±200,000, Life 5 years. Year 2 Depreciation Expense?', ['‚Ç±600,000', '‚Ç±640,000', '‚Ç±3,000,000', '‚Ç±500,000'], '‚Ç±600,000', '(3,200,000 - 200,000) / 5 = 600,000 per year.'),
            createQ(179, 'Theory', 'Source', 'Data for adjusting entries primarily comes from:', ['General Ledger & Internal data', 'Bank Statement only', 'Invoices only', 'Previous year Balance Sheet'], 'General Ledger & Internal data', 'Account balances coupled with internal counts, schedules, and estimations.'),
            createQ(180, 'Problem', 'Interest', 'Borrowed ‚Ç±10,000,000 at 6% on December 31. What is the Interest Expense for December?', ['‚Ç±600,000', '‚Ç±50,000', '‚Ç±0', '‚Ç±100,000'], '‚Ç±0', 'Borrowed on the last day of the year. No time has passed, so no interest has accrued yet.'),

            // --- Analysis & Correction ---
            createQ(181, 'Theory', 'Materiality', 'Small tools are often expensed immediately instead of depreciated due to the:', ['Materiality Principle', 'Matching Principle', 'Revenue Recognition Principle', 'Going Concern Assumption'], 'Materiality Principle', 'The cost of tracking depreciation for small items outweighs the benefit.'),
            createQ(182, 'Problem', 'Commission', 'Accrued commission income is ‚Ç±150,000. The entry is:', ['Debit Cash; Credit Commission Income', 'Debit Commission Receivable; Credit Commission Income', 'Debit Commission Income; Credit Commission Receivable', 'No Entry'], 'Debit Commission Receivable; Credit Commission Income', 'Income has been earned but cash not yet received.'),
            createQ(183, 'Theory', 'Review', 'After adjusting entries are posted, the next step in the cycle is:', ['Closing Entries', 'Adjusted Trial Balance', 'Financial Statements', 'Reversing Entries'], 'Adjusted Trial Balance', 'To verify that Debits equal Credits after the adjustments are posted.'),
            createQ(184, 'Problem', 'Rent', 'Paid ‚Ç±600,000 for a year on Jan 1. What is the monthly Adjusting Entry amount?', ['Debit Rent Expense 50,000; Credit Prepaid Rent 50,000', 'Debit Rent Expense 600,000; Credit Prepaid Rent 600,000', 'No entry', 'Debit Rent Expense 50,000; Credit Cash 50,000'], 'Debit Rent Expense 50,000; Credit Prepaid Rent 50,000', '600,000 / 12 months = 50,000 per month amortization.'),
            createQ(185, 'Theory', 'Unearned', 'If unearned revenue is not adjusted for the earned portion, revenue is:', ['Overstated', 'Understated', 'Correct', 'Zero'], 'Understated', 'The earned portion remains hidden in the Liability account, keeping Revenue too low.'),
            createQ(186, 'Problem', 'Bad Debts', 'Allowance has a ‚Ç±15,000 Debit balance. Desired balance is ‚Ç±100,000 Credit. Adjustment amount?', ['‚Ç±85,000', '‚Ç±100,000', '‚Ç±115,000', '‚Ç±15,000'], '‚Ç±115,000', 'To go from negative 15,000 to positive 100,000 requires a credit of 115,000.'),
            createQ(187, 'Theory', 'Nature', 'Adjusting entries usually involve:', ['One Balance Sheet and one Income Statement account', 'Two Balance Sheet accounts', 'Two Income Statement accounts', 'Cash and Income Statement'], 'One Balance Sheet and one Income Statement account', 'Example: Prepaid Rent (BS) and Rent Expense (IS).'),
            createQ(188, 'Problem', 'Wages', 'Wages are ‚Ç±50,000/day. 3 days are accrued at year end. Adjustment?', ['Debit Wage Expense 150,000; Credit Wage Payable 150,000', 'Debit Wage Payable 150,000; Credit Cash 150,000', 'Debit Wage Expense 50,000; Credit Wage Payable 50,000', 'No entry'], 'Debit Wage Expense 150,000; Credit Wage Payable 150,000', '3 days * 50,000 = 150,000 accrued.'),
            createQ(189, 'Theory', 'Depreciation', 'Land is:', ['Depreciated over 50 years', 'Depreciated over 100 years', 'Never depreciated', 'Amortized'], 'Never depreciated', 'Land has an indefinite useful life and is not subject to depreciation.'),
            createQ(190, 'Theory', 'Review', 'Which account is NEVER debited in an adjusting entry?', ['Revenue', 'Expense', 'Liability', 'Capital Stock'], 'Capital Stock', 'Equity corpus (Capital Stock) is not adjusted in the normal adjusting process; Retained Earnings is affected via Closing.'),
            createQ(191, 'Theory', 'Estimate', 'Depreciation is an example of:', ['An accounting estimate', 'An exact calculation', 'A cash flow', 'A liability'], 'An accounting estimate', 'It uses estimated useful life and estimated salvage value.'),
            createQ(192, 'Problem', 'Prepaid', 'Prepaid Insurance started at ‚Ç±500,000. ‚Ç±100,000 has expired. What is the Ending Balance?', ['‚Ç±500,000', '‚Ç±600,000', '‚Ç±400,000', '‚Ç±100,000'], '‚Ç±400,000', '500,000 (Beg) - 100,000 (Expensed) = 400,000 (End).'),
            createQ(193, 'Theory', 'Contra', 'Sales Returns and Allowances is a contra account to:', ['Expenses', 'Assets', 'Sales Revenue', 'Liabilities'], 'Sales Revenue', 'It reduces the Gross Sales to arrive at Net Sales.'),
            createQ(194, 'Problem', 'Interest', '90 day note, ‚Ç±5,000,000 principal, 10% rate. 30 days have passed. Interest Accrued?', ['‚Ç±41,667', '‚Ç±125,000', '‚Ç±500,000', '‚Ç±13,888'], '‚Ç±41,667', '5,000,000 * 10% * 30/360 = 41,666.67 (rounded to 41,667).'),
            createQ(195, 'Theory', 'Consistency', 'Using the same depreciation method from year to year is an application of:', ['Consistency', 'Matching', 'Disclosure', 'Materiality'], 'Consistency', 'It allows for comparability of financial data across periods.'),
            createQ(196, 'Problem', 'Correction', 'Recorded ‚Ç±50,000 expense as ‚Ç±5,000. What is the correction?', ['Debit Expense 45,000; Credit Payable 45,000', 'Debit Expense 5,000; Credit Cash 5,000', 'Debit Cash 45,000; Credit Expense 45,000', 'No entry'], 'Debit Expense 45,000; Credit Payable 45,000', 'We understated the expense by 45,000 (50k - 5k), so we must record the difference.'),
            createQ(197, 'Theory', 'Accruals', 'Accrued expenses are classified as:', ['Liabilities', 'Assets', 'Revenue', 'Equity'], 'Liabilities', 'They represent debts owed for services/goods received but not yet paid.'),
            createQ(198, 'Problem', 'Supplies', 'Beginning 0. Bought ‚Ç±100,000. Ending Inventory ‚Ç±30,000. What is the Expense?', ['‚Ç±70,000', '‚Ç±30,000', '‚Ç±100,000', '‚Ç±0'], '‚Ç±70,000', 'Available 100,000 - Ending 30,000 = Used 70,000.'),
            createQ(199, 'Theory', 'Goal', 'The main goal of adjusting entries is to:', ['Report proper Net Income', 'Pay less tax', 'Increase cash balance', 'Reduce workload'], 'Report proper Net Income', 'They ensure expenses and revenues are assigned to the correct period for accurate performance measurement.'),
            createQ(200, 'Problem', 'Final', 'Depreciation Expense is ‚Ç±150,000. The entry is:', ['Debit Depreciation Expense 150,000; Credit Accumulated Depreciation 150,000', 'Debit Accumulated Depreciation 150,000; Credit Depreciation Expense 150,000', 'Debit Equipment 150,000; Credit Cash 150,000', 'Debit Depreciation Expense 150,000; Credit Equipment 150,000'], 'Debit Depreciation Expense 150,000; Credit Accumulated Depreciation 150,000', 'Standard entry to record depreciation.')
        );
        // 5. Closing Entries (201-250)
        questions.push(
            createQ(201, 'Theory', 'Closing', 'Which account is NOT closed at year-end?', ['Service Revenue', 'Rent Expense', 'Drawings', 'Accumulated Depreciation'], 'Accumulated Depreciation', 'It is a permanent (real) account.'),
            createQ(202, 'Problem', 'Income Summary', 'Revenues ‚Ç±100k, Expenses ‚Ç±60k. Balance of Income Summary after first two entries?', ['‚Ç±40k Credit', '‚Ç±40k Debit', '‚Ç±160k Credit', 'Zero'], '‚Ç±40k Credit', 'Credit 100k (Rev) - Debit 60k (Exp) = 40k Credit balance.')
        );
        for(let i=203; i<=250; i++) questions.push(createQ(i, i%2===0?'Problem':'Theory', 'Step 8 Practice', `Practice Question ${i}: Closing entry logic.`, ['Option A', 'Option B', 'Option C', 'Option D'], 'Option A', 'Explanation of REID method.'));

        // 6. Post-Closing Trial Balance (251-300)
        questions.push(
            createQ(251, 'Theory', 'PCTB', 'The Post-Closing Trial Balance contains:', ['Nominal Accounts only', 'Real Accounts only', 'Both Real and Nominal', 'Only Cash'], 'Real Accounts only', 'Nominal accounts have been closed to zero.'),
            createQ(252, 'Problem', 'PCTB', 'If PCTB Debits = ‚Ç±500k, Credits must be:', ['‚Ç±500k', 'Depends on Net Income', '‚Ç±0', 'Unknown'], '‚Ç±500k', 'Debits must always equal Credits.')
        );
        for(let i=253; i<=300; i++) questions.push(createQ(i, i%2===0?'Problem':'Theory', 'Step 9 Practice', `Practice Question ${i}: PCTB verification.`, ['Option A', 'Option B', 'Option C', 'Option D'], 'Option A', 'Explanation of trial balance equality.'));

        // 7. Reversing Entries (301-350)
        questions.push(
            createQ(301, 'Theory', 'Reversing', 'Reversing entries are:', ['Mandatory', 'Optional', 'Required for tax purposes', 'Illegal'], 'Optional', 'They are used for convenience.'),
            createQ(302, 'Problem', 'Reversing', 'Adjusting Entry: Dr Salaries Exp ‚Ç±1k, Cr Salaries Pay ‚Ç±1k. Reversing Entry is:', ['Dr Salaries Pay ‚Ç±1k, Cr Salaries Exp ‚Ç±1k', 'Dr Salaries Exp ‚Ç±1k, Cr Cash ‚Ç±1k', 'No entry', 'Same as adjusting'], 'Dr Salaries Pay ‚Ç±1k, Cr Salaries Exp ‚Ç±1k', 'Exact reverse of the adjusting entry.')
        );
        for(let i=303; i<=350; i++) questions.push(createQ(i, i%2===0?'Problem':'Theory', 'Step 10 Practice', `Practice Question ${i}: Reversing entry application.`, ['Option A', 'Option B', 'Option C', 'Option D'], 'Option A', 'Explanation of reversing logic.'));


        // --- INITIALIZATION ---
        function init() {
            renderSidebar();
            loadModule(0);
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            isSidebarCollapsed = !isSidebarCollapsed;
            if (isSidebarCollapsed) {
                sidebar.classList.remove('w-64');
                sidebar.classList.add('w-20', 'sidebar-collapsed');
            } else {
                sidebar.classList.add('w-64');
                sidebar.classList.remove('w-20', 'sidebar-collapsed');
            }
        }

        function renderSidebar() {
            const nav = document.getElementById('nav-container');
            nav.innerHTML = '';
            modules.forEach((mod, index) => {
                const btn = document.createElement('button');
                btn.className = `w-full flex items-center p-3 transition-colors duration-200 menu-item group
                    ${index === currentModuleIndex ? 'bg-blue-800 border-l-4 border-yellow-400' : 'hover:bg-blue-800 border-l-4 border-transparent'}`;
                btn.onclick = () => loadModule(index);
                const shortTitle = mod.title.split('. ')[1] || mod.title;
                btn.innerHTML = `
                    <i class="ph ${mod.icon} text-2xl shrink-0 ${index === currentModuleIndex ? 'text-yellow-400' : 'text-blue-300'}"></i>
                    <div class="ml-3 text-left menu-text overflow-hidden">
                        <p class="text-sm font-semibold truncate text-white">${shortTitle}</p>
                        <p class="text-xs text-blue-300 truncate">Step ${mod.id.replace('step', '')}</p>
                    </div>
                `;
                nav.appendChild(btn);
            });
        }

        function loadModule(index) {
            currentModuleIndex = index;
            const mod = modules[index];
            
            // Header Update
            document.getElementById('page-title').innerText = mod.title;
            document.getElementById('page-subtitle').innerText = `Accounting Cycle Step ${mod.id.replace('step','')}`;
            renderSidebar();
            renderTheory(mod.theoryId);

            // Filter Questions for this module
            const startID = mod.range[0];
            const endID = mod.range[1];
            currentModuleQuestions = questions.filter(q => q.id >= startID && q.id <= endID);
            
            // Reset Practice View
            currentQuestionIndex = 0;
            renderQuestionUI();
            
            // Default to theory tab
            switchTab('theory');
        }

        function switchTab(tabName) {
            const theoryView = document.getElementById('view-theory');
            const practiceView = document.getElementById('view-practice');
            const btnTheory = document.getElementById('tab-theory');
            const btnPractice = document.getElementById('tab-practice');

            if (tabName === 'theory') {
                theoryView.classList.remove('hidden');
                practiceView.classList.add('hidden');
                btnTheory.className = 'px-4 py-2 text-sm font-semibold rounded-md shadow-sm bg-white text-blue-700 transition-all';
                btnPractice.className = 'px-4 py-2 text-sm font-semibold rounded-md text-gray-500 hover:text-gray-700 transition-all';
            } else {
                theoryView.classList.add('hidden');
                practiceView.classList.remove('hidden');
                btnTheory.className = 'px-4 py-2 text-sm font-semibold rounded-md text-gray-500 hover:text-gray-700 transition-all';
                btnPractice.className = 'px-4 py-2 text-sm font-semibold rounded-md shadow-sm bg-white text-blue-700 transition-all';
                // Ensure UI is fresh when switching
                renderQuestionUI(); 
            }
        }

        // --- THEORY CONTENT ---
        const theoryContentDB = {
            'theory-adjustments': `
                <div class="space-y-8">
                    <!-- Header -->
                    <div class="text-center border-b-2 border-blue-100 pb-4">
                        <h2 class="text-3xl font-extrabold text-blue-900">The Balance Keeper</h2>
                        <p class="text-lg text-blue-600 font-medium">A Comprehensive Guide to Accrual and Deferral Adjustments</p>
                    </div>

                    <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <h3 class="font-bold text-gray-800 mb-2">Table of Contents</h3>
                        <ul class="list-none space-y-1 text-blue-600">
                            <li><a href="#intro" class="hover:underline">Introduction: Timing is Everything</a></li>
                            <li><a href="#chap1" class="hover:underline">Chapter 1: The Accounting Cycle & The Matching Principle</a></li>
                            <li><a href="#chap2" class="hover:underline">Chapter 2: Deferrals (Prepayments)</a></li>
                            <li><a href="#chap3" class="hover:underline">Chapter 3: Accruals</a></li>
                            <li><a href="#chap4" class="hover:underline">Chapter 4: The Impact of Depreciation</a></li>
                            <li><a href="#chap5" class="hover:underline">Chapter 5: Summary & Cheat Sheet</a></li>
                        </ul>
                    </div>

                    <!-- Intro -->
                    <section id="intro">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">Introduction: Timing is Everything</h3>
                        <p class="text-gray-700 mb-2">In the world of accounting, cash is king, but timing is the kingdom.</p>
                        <p class="text-gray-700 mb-2">If a business only recorded transactions when cash changed hands, the financial picture would be distorted. Imagine a company that pays its rent for the whole year in January. If they recorded that entire cost as an expense only in January, they would look incredibly unprofitable that month and artificially wealthy for the rest of the year.</p>
                        <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500 mt-4">
                            <p class="font-semibold text-blue-800">This is where Adjusting Entries come in.</p>
                            <p class="text-gray-700 mt-2">Adjusting entries are the mechanism we use to apply the Accrual Basis of Accounting. They ensure that revenues are recorded when they are earned and expenses are recorded when they are incurred, regardless of when the cash is actually exchanged.</p>
                            <p class="text-gray-700 mt-2">This eBook will demystify the two main categories of adjustments: Deferrals (putting things off) and Accruals (bringing things forward).</p>
                        </div>
                    </section>

                    <!-- Chapter 1 -->
                    <section id="chap1" class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <h3 class="text-xl font-bold text-blue-800 mb-4">Chapter 1: The Accounting Cycle & The Matching Principle</h3>
                        <p class="mb-4 text-gray-700">Before diving into the math, we must understand the rules of the game.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div class="bg-gray-50 p-3 rounded">
                                <strong class="block text-gray-900">Cash Basis</strong>
                                <span class="text-sm text-gray-600">Revenues/Expenses recognized only when cash is received or paid. (Not GAAP compliant for most businesses).</span>
                            </div>
                            <div class="bg-blue-50 p-3 rounded">
                                <strong class="block text-blue-900">Accrual Basis</strong>
                                <span class="text-sm text-blue-800">Revenues/Expenses recognized when the event occurs (service performed or resource used).</span>
                            </div>
                        </div>

                        <h4 class="font-bold text-gray-800 mt-4 mb-2">The Two Pillars of Adjustments</h4>
                        <ul class="list-disc ml-5 space-y-2 text-gray-700">
                            <li><strong>The Revenue Recognition Principle:</strong> Revenue is recognized in the period when the performance obligation is satisfied (the work is done).</li>
                            <li><strong>The Expense Recognition Principle (The Matching Principle):</strong> Expenses should be matched with the revenues they helped generate in the same period.</li>
                        </ul>

                        <h4 class="font-bold text-gray-800 mt-4 mb-2">Why do we adjust?</h4>
                        <p class="text-gray-700">We adjust the books at the end of an accounting period (month, quarter, or year) to bring account balances up to date before preparing financial statements.</p>
                    </section>

                    <!-- Chapter 2 -->
                    <section id="chap2">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Chapter 2: Deferrals (Prepayments)</h3>
                        <p class="text-gray-600 mb-4 bg-yellow-50 p-3 rounded border-l-4 border-yellow-400"><em>Definition: A Deferral occurs when Cash is exchanged BEFORE the revenue or expense is recognized. We are "deferring" (delaying) the recognition of the income or expense to a later date.</em></p>
                        
                        <div class="space-y-6">
                            <!-- Prepaid Exp -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h4 class="font-bold text-lg text-gray-900 mb-2">1. Prepaid Expenses</h4>
                                <p class="text-sm text-gray-700 mb-2"><strong>Scenario:</strong> The company pays cash now for an asset that will benefit future periods (e.g., Insurance, Rent, Supplies).</p>
                                <p class="text-sm text-gray-700 mb-2"><strong>The Goal:</strong> Convert an Asset into an Expense as it is used up.</p>
                                
                                <ul class="list-disc ml-5 text-sm mb-3">
                                    <li><strong>Initial Entry (Payment Date):</strong> Increase Asset, Decrease Cash.</li>
                                    <li><strong>Adjusting Entry (End of Period):</strong> Increase Expense, Decrease Asset.</li>
                                </ul>

                                <div class="bg-gray-50 p-3 rounded text-sm mb-3">
                                    <p class="font-semibold">Example:</p>
                                    <p>On December 1, TechSolutions pays $1,200 for a 12-month insurance policy.</p>
                                    <p class="mt-2"><em>Initial recording:</em> Debit Prepaid Insurance $1,200.</p>
                                    <p><em>Adjusting Entry on Dec 31:</em> One month of insurance has been "used up" ($1,200 / 12 = $100).</p>
                                </div>

                                <!-- Example Table -->
                                <div class="mt-3 overflow-x-auto">
                                    <table class="min-w-full text-xs text-left border collapse">
                                        <thead><tr class="bg-gray-100 border-b">
                                            <th class="p-2 border">Date</th>
                                            <th class="p-2 border">Account</th>
                                            <th class="p-2 border">Debit</th>
                                            <th class="p-2 border">Credit</th>
                                        </tr></thead>
                                        <tbody>
                                            <tr class="border-b"><td class="p-2">Dec 31</td><td class="p-2">Insurance Expense</td><td class="p-2">$100</td><td class="p-2"></td></tr>
                                            <tr class="border-b"><td class="p-2"></td><td class="p-2 pl-6">Prepaid Insurance</td><td class="p-2"></td><td class="p-2">$100</td></tr>
                                            <tr><td class="p-2" colspan="4"><em>To record insurance expense for Dec</em></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Unearned Rev -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h4 class="font-bold text-lg text-gray-900 mb-2">2. Unearned Revenues</h4>
                                <p class="text-sm text-gray-700 mb-2"><strong>Scenario:</strong> A customer pays the company cash now for a service to be performed later (e.g., Plane tickets, Annual Subscriptions, Retainer fees).</p>
                                <p class="text-sm text-gray-700 mb-2"><strong>The Goal:</strong> Convert a Liability into Revenue as the work is done.</p>
                                
                                <ul class="list-disc ml-5 text-sm mb-3">
                                    <li><strong>Initial Entry (Receipt Date):</strong> Increase Cash, Increase Liability (Unearned Revenue).</li>
                                    <li><strong>Adjusting Entry (End of Period):</strong> Decrease Liability, Increase Revenue.</li>
                                </ul>

                                <div class="bg-gray-50 p-3 rounded text-sm mb-3">
                                    <p class="font-semibold">Example:</p>
                                    <p>On December 1, a law firm receives a $3,000 retainer from a client for services to be performed over the next three months.</p>
                                    <p class="mt-2"><em>Initial recording:</em> Credit Unearned Service Revenue $3,000.</p>
                                    <p><em>Adjusting Entry on Dec 31:</em> The firm has performed one month of work ($3,000 / 3 = $1,000).</p>
                                </div>

                                <!-- Example Table -->
                                <div class="mt-3 overflow-x-auto">
                                     <table class="min-w-full text-xs text-left border collapse">
                                        <thead><tr class="bg-gray-100 border-b">
                                            <th class="p-2 border">Date</th>
                                            <th class="p-2 border">Account</th>
                                            <th class="p-2 border">Debit</th>
                                            <th class="p-2 border">Credit</th>
                                        </tr></thead>
                                        <tbody>
                                            <tr class="border-b"><td class="p-2">Dec 31</td><td class="p-2">Unearned Service Revenue</td><td class="p-2">$1,000</td><td class="p-2"></td></tr>
                                            <tr class="border-b"><td class="p-2"></td><td class="p-2 pl-6">Service Revenue</td><td class="p-2"></td><td class="p-2">$1,000</td></tr>
                                            <tr><td class="p-2" colspan="4"><em>To record revenue earned in Dec</em></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Chapter 3 -->
                    <section id="chap3">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Chapter 3: Accruals</h3>
                        <p class="text-gray-600 mb-4 bg-green-50 p-3 rounded border-l-4 border-green-400"><em>Definition: An Accrual occurs when Cash is exchanged AFTER the revenue or expense is recognized. We are "accruing" (accumulating) the income or expense now, even though money hasn't moved yet.</em></p>
                        
                        <div class="space-y-6">
                            <!-- Accrued Rev -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h4 class="font-bold text-lg text-gray-900 mb-2">1. Accrued Revenues</h4>
                                <p class="text-sm text-gray-700 mb-2"><strong>Scenario:</strong> The company has performed a service but has not yet received cash or billed the customer.</p>
                                <p class="text-sm text-gray-700 mb-2"><strong>The Goal:</strong> Record Revenue and a Receivable (Asset).</p>
                                
                                <p class="text-sm mb-3"><strong>Adjusting Entry:</strong> Increase Asset (Receivable), Increase Revenue.</p>

                                <div class="bg-gray-50 p-3 rounded text-sm mb-3">
                                    <p class="font-semibold">Example:</p>
                                    <p>A consulting firm performs $500 worth of services in the last week of December but won't bill the client until the project finishes in January.</p>
                                </div>

                                <div class="mt-3 overflow-x-auto">
                                     <table class="min-w-full text-xs text-left border collapse">
                                        <thead><tr class="bg-gray-100 border-b">
                                            <th class="p-2 border">Date</th>
                                            <th class="p-2 border">Account</th>
                                            <th class="p-2 border">Debit</th>
                                            <th class="p-2 border">Credit</th>
                                        </tr></thead>
                                        <tbody>
                                            <tr class="border-b"><td class="p-2">Dec 31</td><td class="p-2">Accounts Receivable</td><td class="p-2">$500</td><td class="p-2"></td></tr>
                                            <tr class="border-b"><td class="p-2"></td><td class="p-2 pl-6">Service Revenue</td><td class="p-2"></td><td class="p-2">$500</td></tr>
                                            <tr><td class="p-2" colspan="4"><em>To record revenue for services performed</em></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                                <p class="text-xs text-gray-500 mt-2"><em>Note: Without this entry, revenue and assets would both be understated.</em></p>
                            </div>

                             <!-- Accrued Exp -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h4 class="font-bold text-lg text-gray-900 mb-2">2. Accrued Expenses</h4>
                                <p class="text-sm text-gray-700 mb-2"><strong>Scenario:</strong> The company has incurred a cost (used a resource) but hasn't paid for it yet (e.g., Salaries, Interest, Taxes).</p>
                                <p class="text-sm text-gray-700 mb-2"><strong>The Goal:</strong> Record Expense and a Payable (Liability).</p>

                                <p class="text-sm mb-3"><strong>Adjusting Entry:</strong> Increase Expense, Increase Liability (Payable).</p>

                                <div class="bg-gray-50 p-3 rounded text-sm mb-3">
                                    <p class="font-semibold">Example:</p>
                                    <p>Employees work the last three days of December, earning $4,000 in total wages. Payday isn't until January 5th.</p>
                                </div>

                                <div class="mt-3 overflow-x-auto">
                                     <table class="min-w-full text-xs text-left border collapse">
                                        <thead><tr class="bg-gray-100 border-b">
                                            <th class="p-2 border">Date</th>
                                            <th class="p-2 border">Account</th>
                                            <th class="p-2 border">Debit</th>
                                            <th class="p-2 border">Credit</th>
                                        </tr></thead>
                                        <tbody>
                                            <tr class="border-b"><td class="p-2">Dec 31</td><td class="p-2">Salaries and Wages Expense</td><td class="p-2">$4,000</td><td class="p-2"></td></tr>
                                            <tr class="border-b"><td class="p-2"></td><td class="p-2 pl-6">Salaries and Wages Payable</td><td class="p-2"></td><td class="p-2">$4,000</td></tr>
                                            <tr><td class="p-2" colspan="4"><em>To record accrued salaries</em></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                                <p class="text-xs text-gray-500 mt-2"><em>Note: Without this entry, expenses and liabilities would be understated, making net income look artificially high.</em></p>
                            </div>
                        </div>
                    </section>

                     <!-- Chapter 4 -->
                    <section id="chap4" class="bg-gray-50 p-6 rounded-xl border border-gray-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">Chapter 4: The Impact of Depreciation</h3>
                        <p class="text-gray-700 mb-3">Depreciation is a special type of Deferral. When a company buys a long-term asset (like a truck or building), it is essentially a huge prepaid expense.</p>
                        <p class="text-gray-700 mb-3">Instead of expensing the truck all at once, we allocate its cost over its useful life.</p>
                        
                        <div class="bg-white p-4 rounded border border-gray-200">
                             <p class="font-bold mb-2">The Logic:</p>
                             <ul class="list-decimal ml-5 text-sm mb-4">
                                <li>Asset purchased (Capitalized).</li>
                                <li>Asset provides value over time.</li>
                                <li>Cost is moved to expense gradually using a contra-asset account called Accumulated Depreciation.</li>
                             </ul>

                             <p class="font-bold mb-2">Example:</p>
                             <p class="text-sm mb-3">A machine costs $10,000 and has a useful life of 10 years (straight-line depreciation = $1,000/year).</p>

                             <table class="min-w-full text-xs text-left border collapse bg-white">
                                <thead><tr class="bg-gray-100 border-b">
                                    <th class="p-2 border">Date</th>
                                    <th class="p-2 border">Account</th>
                                    <th class="p-2 border">Debit</th>
                                    <th class="p-2 border">Credit</th>
                                </tr></thead>
                                <tbody>
                                    <tr class="border-b"><td class="p-2">Dec 31</td><td class="p-2">Depreciation Expense</td><td class="p-2">$1,000</td><td class="p-2"></td></tr>
                                    <tr class="border-b"><td class="p-2"></td><td class="p-2 pl-6">Accumulated Depreciation</td><td class="p-2"></td><td class="p-2">$1,000</td></tr>
                                </tbody>
                            </table>
                            <p class="text-xs text-gray-500 mt-2"><em>Note: We credit Accumulated Depreciation rather than the asset directly to keep the historical cost of the asset visible on the books.</em></p>
                        </div>
                    </section>

                    <!-- Chapter 5 -->
                    <section id="chap5">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Chapter 5: Summary & Cheat Sheet</h3>
                        <p class="mb-4 text-gray-700 font-medium">Understanding whether you are dealing with an accrual or a deferral comes down to one question: <strong>Where is the cash?</strong></p>
                        
                        <div class="overflow-x-auto shadow-sm rounded-lg border border-gray-200">
                            <table class="min-w-full text-sm text-left border-collapse">
                                <thead>
                                    <tr class="bg-blue-800 text-white">
                                        <th class="p-3">Type</th>
                                        <th class="p-3">Scenario</th>
                                        <th class="p-3">Cash Timing</th>
                                        <th class="p-3">Adjusting Entry Logic</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr class="bg-white">
                                        <td class="p-3 font-bold text-blue-900">Prepaid Expense</td>
                                        <td class="p-3">Paid for supplies/rent not yet used</td>
                                        <td class="p-3">Before</td>
                                        <td class="p-3 font-mono text-xs">Dr. Expense <br> Cr. Asset</td>
                                    </tr>
                                    <tr class="bg-gray-50">
                                        <td class="p-3 font-bold text-blue-900">Unearned Revenue</td>
                                        <td class="p-3">Cash received for work not yet done</td>
                                        <td class="p-3">Before</td>
                                        <td class="p-3 font-mono text-xs">Dr. Liability <br> Cr. Revenue</td>
                                    </tr>
                                     <tr class="bg-white">
                                        <td class="p-3 font-bold text-green-900">Accrued Revenue</td>
                                        <td class="p-3">Work done, cash not yet received</td>
                                        <td class="p-3">After</td>
                                        <td class="p-3 font-mono text-xs">Dr. Asset <br> Cr. Revenue</td>
                                    </tr>
                                    <tr class="bg-gray-50">
                                        <td class="p-3 font-bold text-green-900">Accrued Expense</td>
                                        <td class="p-3">Expense incurred, cash not yet paid</td>
                                        <td class="p-3">After</td>
                                        <td class="p-3 font-mono text-xs">Dr. Expense <br> Cr. Liability</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="mt-6 p-4 bg-gray-100 rounded-lg">
                            <h4 class="font-bold text-gray-800 mb-2">Final Thoughts</h4>
                            <p class="text-gray-700">Adjusting entries ensures that the Financial Statements (Balance Sheet and Income Statement) tell the truth about what the company actually owns, owes, earned, and spent during the period. Without them, accounting is just a list of bank transactions; with them, it is a measurement of economic reality.</p>
                        </div>
                        <p class="text-xs text-gray-400 mt-6 text-center">¬© 2025 JLVCPA. All rights reserved.</p>
                    </section>
                </div>
            `,
            'theory-worksheet': `<h3 class="text-2xl font-bold text-gray-800 mb-4">Step 5: The 10-Column Worksheet</h3><p>An optional tool for preparing financial statements.</p><ul class="list-disc ml-5 mt-2"><li>Trial Balance</li><li>Adjustments</li><li>Adjusted TB</li><li>Income Statement</li><li>Balance Sheet</li></ul>`,
            'theory-fs': `<h3 class="text-2xl font-bold text-gray-800 mb-4">Step 6: Financial Statements</h3><ol class="list-decimal ml-5 space-y-2"><li><strong>Income Statement:</strong> Profitability.</li><li><strong>Statement of Changes in Equity:</strong> Owner's capital.</li><li><strong>Balance Sheet:</strong> Solvency/Liquidity.</li><li><strong>Cash Flows:</strong> Liquidity.</li></ol>`,
            'theory-step7': `<h3 class="text-2xl font-bold text-blue-800 mb-2">Step 7: Journalizing Adjusting Entries</h3><p>Formal recording of worksheet adjustments into the General Journal and posting to Ledger.</p>`,
            'theory-step8': `<h3 class="text-2xl font-bold text-green-800 mb-2">Step 8: Closing Entries (REID)</h3><p>Zero out nominal accounts.</p><ul class="list-disc ml-5"><li>Rev -> Inc Sum</li><li>Exp -> Inc Sum</li><li>Inc Sum -> Cap</li><li>Draw -> Cap</li></ul>`,
            'theory-step9': `<h3 class="text-2xl font-bold text-purple-800 mb-2">Step 9: Post-Closing Trial Balance</h3><p>Verifies equality of permanent accounts after closing.</p>`,
            'theory-step10': `<h3 class="text-2xl font-bold text-yellow-800 mb-2">Step 10: Reversing Entries</h3><p>Optional step on Day 1 of new period. Reverses Accruals and Expense-method Deferrals.</p>`
        };

        function renderTheory(id) {
            document.getElementById('dynamic-theory-content').innerHTML = theoryContentDB[id] || '<p>Loading content...</p>';
        }

        // --- PRACTICE LOGIC (UPDATED) ---

        function renderQuestionUI() {
            if(currentModuleQuestions.length === 0) {
                document.getElementById('question-content-area').innerHTML = '<p>No questions available.</p>';
                return;
            }

            const q = currentModuleQuestions[currentQuestionIndex];
            const userAns = userAnswers[q.id];
            
            // Shuffle options once logic could be added here, keeping simple for now
            // We assume options are static for stability in this version
            let optionsHtml = '';
            q.options.forEach(opt => {
                const isChecked = userAns === opt;
                const safeOpt = opt.replace(/"/g, '&quot;');
                
                optionsHtml += `
                    <label class="flex items-start p-3 border rounded-lg hover:bg-blue-50 cursor-pointer transition-colors ${isChecked ? 'bg-blue-50 border-blue-400 ring-1 ring-blue-400' : 'border-gray-200'}">
                        <input type="radio" name="q_${q.id}" value="${safeOpt}" 
                            onchange="saveAnswer(${q.id}, this.value)" 
                            class="mt-1 mr-3 text-blue-600" ${isChecked ? 'checked' : ''}>
                        <span class="text-gray-700 text-base">${opt}</span>
                    </label>
                `;
            });

            document.getElementById('question-content-area').innerHTML = `
                <div class="mb-6">
                    <span class="inline-block px-2 py-1 text-xs font-semibold text-blue-800 bg-blue-100 rounded mb-3">
                        ${q.type} - ${q.topic}
                    </span>
                    <h3 class="text-xl font-bold text-gray-800 leading-relaxed">
                        <span class="text-gray-400 mr-2">#${currentQuestionIndex + 1}</span> ${q.q}
                    </h3>
                </div>
                <div class="space-y-3">
                    ${optionsHtml}
                </div>
            `;

            // Buttons
            const prevBtn = document.getElementById('btn-prev');
            const nextBtn = document.getElementById('btn-next');
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = currentQuestionIndex === currentModuleQuestions.length - 1;

            // Counter
            document.getElementById('question-counter').innerText = `${currentQuestionIndex + 1} / ${currentModuleQuestions.length}`;

            // Render Palette
            renderPalette();
        }

        function renderPalette() {
            const palette = document.getElementById('question-palette');
            palette.innerHTML = '';
            
            let answeredCount = 0;

            currentModuleQuestions.forEach((q, idx) => {
                const isAnswered = userAnswers[q.id] !== undefined;
                if (isAnswered) answeredCount++;
                
                const isActive = idx === currentQuestionIndex;
                let classes = 'q-dot';
                if (isActive) classes += ' active';
                if (isAnswered) classes += ' answered';

                const dot = document.createElement('div');
                dot.className = classes;
                dot.innerText = idx + 1;
                dot.onclick = () => jumpToQuestion(idx);
                palette.appendChild(dot);
            });

            document.getElementById('progress-text').innerText = `${answeredCount}/${currentModuleQuestions.length} Answered`;
        }

        function nextQuestion() {
            if(currentQuestionIndex < currentModuleQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestionUI();
            }
        }

        function prevQuestion() {
            if(currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestionUI();
            }
        }

        function jumpToQuestion(index) {
            currentQuestionIndex = index;
            renderQuestionUI();
        }

        function saveAnswer(qId, val) {
            userAnswers[qId] = val;
            renderQuestionUI(); // Re-render to show active state/coloring
        }

        function checkStudentInfo() {
            const cn = document.getElementById('class-number').value;
            const name = document.getElementById('full-name').value;
            const section = document.getElementById('grade-section').value;
            if(cn && name && section) {
                document.getElementById('student-overlay').classList.add('hidden');
            } else {
                alert("Please complete all fields.");
            }
        }

        // --- PRINT LOGIC (UPDATED) ---
        function togglePrintInputs() {
            const chk = document.getElementById('print-current-only');
            const inputs = document.getElementById('custom-range-inputs');
            if(chk.checked) {
                inputs.classList.add('opacity-50', 'pointer-events-none');
            } else {
                inputs.classList.remove('opacity-50', 'pointer-events-none');
            }
        }

        function printToPDF() {
            document.getElementById('print-range-modal').classList.remove('hidden');
            const mod = modules[currentModuleIndex];
            // Pre-fill
            document.getElementById('range-start').value = mod.range[0];
            document.getElementById('range-end').value = mod.range[1];
        }

        function cancelPrintProcess() {
            document.getElementById('print-range-modal').classList.add('hidden');
        }

        let printQuestionsList = [];
        let printChunks = [];
        let currentChunk = 0;

        function startPrintProcess() {
            const onlyCurrent = document.getElementById('print-current-only').checked;
            let start, end;
            if(onlyCurrent) {
                const mod = modules[currentModuleIndex];
                start = mod.range[0];
                end = mod.range[1];
            } else {
                start = parseInt(document.getElementById('range-start').value);
                end = parseInt(document.getElementById('range-end').value);
            }

            printQuestionsList = questions.filter(q => q.id >= start && q.id <= end);
            if(printQuestionsList.length === 0) { alert("No questions in range."); return; }

            printChunks = [];
            for (let i = 0; i < printQuestionsList.length; i += 50) {
                printChunks.push(printQuestionsList.slice(i, i + 50));
            }
            
            document.getElementById('print-range-modal').classList.add('hidden');
            document.getElementById('print-preview-modal').classList.remove('hidden');
            
            currentChunk = 0;
            renderPrintChunk(currentChunk);
        }

        function renderPrintChunk(index) {
            const chunk = printChunks[index];
            const container = document.getElementById('print-preview-content');
            
            let score = 0;
            chunk.forEach(q => {
                if(userAnswers[q.id] === q.a) score++;
            });

            let html = `
                <div class="border-b-4 border-blue-800 pb-4 mb-6">
                    <h1 class="text-3xl font-bold text-blue-900">Accounting Mastery Report</h1>
                    <p class="text-gray-600">Student: ${document.getElementById('full-name').value} | Class: ${document.getElementById('class-number').value}</p>
                    <p class="text-gray-600">Part ${index+1} of ${printChunks.length}</p>
                    <div class="mt-2 p-2 bg-blue-50 inline-block rounded">
                        <strong>Score: ${score} / ${chunk.length}</strong>
                    </div>
                </div>
            `;

            chunk.forEach(q => {
                const userAns = userAnswers[q.id];
                const isCorrect = userAns === q.a;
                const isAnswered = userAns !== undefined;

                let statusHTML = '';
                let feedbackClass = '';
                let explanationHTML = '';

                if (!isAnswered) {
                    statusHTML = '<span class="text-gray-500 font-bold">Not Answered</span>';
                    feedbackClass = 'bg-gray-100 border border-gray-200';
                    // REQUIREMENT: Do NOT provide explanation if student did not answer
                    explanationHTML = ''; 
                } else {
                    if (isCorrect) {
                        statusHTML = '<span class="text-green-700 font-bold">Correct</span>';
                        feedbackClass = 'feedback-correct';
                    } else {
                        statusHTML = '<span class="text-red-700 font-bold">Incorrect</span>';
                        feedbackClass = 'feedback-incorrect';
                    }
                    // REQUIREMENT: Show explanation for both correct and wrong answers (if answered)
                    explanationHTML = `
                        <div class="mt-2 pt-2 border-t border-gray-200/50">
                            <p class="font-bold text-xs text-gray-700">Correct Answer: <span class="font-normal">${q.a}</span></p>
                            <p class="font-bold text-xs text-gray-700 mt-1">Explanation:</p>
                            <p class="text-sm text-gray-600">${q.s}</p>
                        </div>
                    `;
                }

                html += `
                    <div class="mb-4 p-4 rounded ${feedbackClass} break-inside-avoid">
                        <div class="flex justify-between">
                            <p class="font-bold text-sm text-blue-900 mb-1">Question ${q.id} (${q.type})</p>
                            ${statusHTML}
                        </div>
                        <p class="mb-2 text-sm font-medium text-gray-800">${q.q}</p>
                        <p class="text-xs text-gray-500 mb-2">Your Answer: <span class="font-mono font-bold text-gray-700">${userAns || '---'}</span></p>
                        ${explanationHTML}
                    </div>
                `;
            });

            container.innerHTML = html;

            const btn = document.getElementById('download-pdf-button');
            btn.disabled = true;
            btn.classList.add('cursor-not-allowed', 'bg-green-300');
            btn.classList.remove('bg-green-600');
            btn.innerText = "Scroll to Bottom to Enable Download";

            const modal = document.getElementById('print-preview-modal');
            modal.onscroll = () => {
                if(modal.scrollTop + modal.clientHeight >= modal.scrollHeight - 50) {
                    btn.disabled = false;
                    btn.classList.remove('cursor-not-allowed', 'bg-green-300');
                    btn.classList.add('bg-green-600', 'hover:bg-green-700', 'text-white');
                    btn.innerText = `Download PDF Part ${index+1}`;
                }
            }
        }

        function runActualPDFGeneration() {
            const element = document.getElementById('print-preview-content');
            const name = document.getElementById('full-name').value.replace(/\s+/g, '_');
            const filename = `Accounting_${name}_Part${currentChunk+1}.pdf`;
            const opt = { margin: 0.5, filename: filename, image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' } };
            
            const btn = document.getElementById('download-pdf-button');
            btn.innerText = "Generating...";
            
            html2pdf().set(opt).from(element).save().then(() => {
                currentChunk++;
                if(currentChunk < printChunks.length) {
                    renderPrintChunk(currentChunk);
                    document.getElementById('print-preview-modal').scrollTop = 0;
                } else {
                    document.getElementById('print-preview-modal').classList.add('hidden');
                    alert("All parts generated.");
                }
            });
        }

        function cancelPrintPreview() {
            document.getElementById('print-preview-modal').classList.add('hidden');
        }

        window.onload = init;

    </script>
</body>
</html>
